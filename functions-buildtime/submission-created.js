!function(e,t){for(var r in t)e[r]=t[r]}(exports,function(e){var t={};function r(s){if(t[s])return t[s].exports;var o=t[s]={i:s,l:!1,exports:{}};return e[s].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(s,o,function(t){return e[t]}.bind(null,o));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=78)}([function(e,t){e.exports=require("stream")},function(e,t){e.exports=require("url")},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];const o=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","HTMLElement",...s];const n=["null","undefined","string","number","bigint","boolean","symbol"];function i(e){return t=>typeof t===e}const{toString:a}=Object.prototype,c=e=>{const t=a.call(e).slice(8,-1);return/HTML\w+Element/.test(t)&&l.domElement(e)?"HTMLElement":(r=t,o.includes(r)?t:void 0);var r},u=e=>t=>c(t)===e;function l(e){if(null===e)return"null";switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol"}if(l.observable(e))return"Observable";if(l.array(e))return"Array";if(l.buffer(e))return"Buffer";const t=c(e);if(t)return t;if(e instanceof String||e instanceof Boolean||e instanceof Number)throw new TypeError("Please don't use object wrappers for primitive types");return"Object"}l.undefined=i("undefined"),l.string=i("string");const h=i("number");l.number=e=>h(e)&&!l.nan(e),l.bigint=i("bigint"),l.function_=i("function"),l.null_=e=>null===e,l.class_=e=>l.function_(e)&&e.toString().startsWith("class "),l.boolean=e=>!0===e||!1===e,l.symbol=i("symbol"),l.numericString=e=>l.string(e)&&!l.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e)),l.array=(e,t)=>!!Array.isArray(e)&&(!l.function_(t)||e.every(t)),l.buffer=e=>{var t,r,s,o;return null!==(o=null===(s=null===(r=null===(t=e)||void 0===t?void 0:t.constructor)||void 0===r?void 0:r.isBuffer)||void 0===s?void 0:s.call(r,e))&&void 0!==o&&o},l.nullOrUndefined=e=>l.null_(e)||l.undefined(e),l.object=e=>!l.null_(e)&&("object"==typeof e||l.function_(e)),l.iterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.iterator])},l.asyncIterable=e=>{var t;return l.function_(null===(t=e)||void 0===t?void 0:t[Symbol.asyncIterator])},l.generator=e=>l.iterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.asyncGenerator=e=>l.asyncIterable(e)&&l.function_(e.next)&&l.function_(e.throw),l.nativePromise=e=>u("Promise")(e);l.promise=e=>l.nativePromise(e)||(e=>{var t,r;return l.function_(null===(t=e)||void 0===t?void 0:t.then)&&l.function_(null===(r=e)||void 0===r?void 0:r.catch)})(e),l.generatorFunction=u("GeneratorFunction"),l.asyncGeneratorFunction=e=>"AsyncGeneratorFunction"===c(e),l.asyncFunction=e=>"AsyncFunction"===c(e),l.boundFunction=e=>l.function_(e)&&!e.hasOwnProperty("prototype"),l.regExp=u("RegExp"),l.date=u("Date"),l.error=u("Error"),l.map=e=>u("Map")(e),l.set=e=>u("Set")(e),l.weakMap=e=>u("WeakMap")(e),l.weakSet=e=>u("WeakSet")(e),l.int8Array=u("Int8Array"),l.uint8Array=u("Uint8Array"),l.uint8ClampedArray=u("Uint8ClampedArray"),l.int16Array=u("Int16Array"),l.uint16Array=u("Uint16Array"),l.int32Array=u("Int32Array"),l.uint32Array=u("Uint32Array"),l.float32Array=u("Float32Array"),l.float64Array=u("Float64Array"),l.bigInt64Array=u("BigInt64Array"),l.bigUint64Array=u("BigUint64Array"),l.arrayBuffer=u("ArrayBuffer"),l.sharedArrayBuffer=u("SharedArrayBuffer"),l.dataView=u("DataView"),l.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype,l.urlInstance=e=>u("URL")(e),l.urlString=e=>{if(!l.string(e))return!1;try{return new URL(e),!0}catch(e){return!1}},l.truthy=e=>Boolean(e),l.falsy=e=>!e,l.nan=e=>Number.isNaN(e),l.primitive=e=>{return l.null_(e)||(t=typeof e,n.includes(t));var t},l.integer=e=>Number.isInteger(e),l.safeInteger=e=>Number.isSafeInteger(e),l.plainObject=e=>{if("[object Object]"!==a.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.getPrototypeOf({})},l.typedArray=e=>{return t=c(e),s.includes(t);var t};l.arrayLike=e=>!l.nullOrUndefined(e)&&!l.function_(e)&&(e=>l.safeInteger(e)&&e>=0)(e.length),l.inRange=(e,t)=>{if(l.number(t))return e>=Math.min(0,t)&&e<=Math.max(t,0);if(l.array(t)&&2===t.length)return e>=Math.min(...t)&&e<=Math.max(...t);throw new TypeError("Invalid range: "+JSON.stringify(t))};const d=["innerHTML","ownerDocument","style","attributes","nodeValue"];l.domElement=e=>l.object(e)&&1===e.nodeType&&l.string(e.nodeName)&&!l.plainObject(e)&&d.every(t=>t in e),l.observable=e=>{var t,r,s,o;return!!e&&(e===(null===(r=(t=e)[Symbol.observable])||void 0===r?void 0:r.call(t))||e===(null===(o=(s=e)["@@observable"])||void 0===o?void 0:o.call(s)))},l.nodeStream=e=>l.object(e)&&l.function_(e.pipe)&&!l.observable(e),l.infinite=e=>e===1/0||e===-1/0;const f=e=>t=>l.integer(t)&&Math.abs(t%2)===e;l.evenInteger=f(0),l.oddInteger=f(1),l.emptyArray=e=>l.array(e)&&0===e.length,l.nonEmptyArray=e=>l.array(e)&&e.length>0,l.emptyString=e=>l.string(e)&&0===e.length,l.nonEmptyString=e=>l.string(e)&&e.length>0;l.emptyStringOrWhitespace=e=>l.emptyString(e)||(e=>l.string(e)&&!/\S/.test(e))(e),l.emptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&0===Object.keys(e).length,l.nonEmptyObject=e=>l.object(e)&&!l.map(e)&&!l.set(e)&&Object.keys(e).length>0,l.emptySet=e=>l.set(e)&&0===e.size,l.nonEmptySet=e=>l.set(e)&&e.size>0,l.emptyMap=e=>l.map(e)&&0===e.size,l.nonEmptyMap=e=>l.map(e)&&e.size>0;const p=(e,t,r)=>{if(!l.function_(t))throw new TypeError("Invalid predicate: "+JSON.stringify(t));if(0===r.length)throw new TypeError("Invalid number of values");return e.call(r,t)};l.any=(e,...t)=>(l.array(e)?e:[e]).some(e=>p(Array.prototype.some,e,t)),l.all=(e,...t)=>p(Array.prototype.every,e,t);const m=(e,t,r,s={})=>{if(!e){const{multipleValues:e}=s,o=e?"received values of types "+[...new Set(r.map(e=>`\`${l(e)}\``))].join(", "):`received value of type \`${l(r)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${o}.`)}};t.assert={undefined:e=>m(l.undefined(e),"undefined",e),string:e=>m(l.string(e),"string",e),number:e=>m(l.number(e),"number",e),bigint:e=>m(l.bigint(e),"bigint",e),function_:e=>m(l.function_(e),"Function",e),null_:e=>m(l.null_(e),"null",e),class_:e=>m(l.class_(e),"Class",e),boolean:e=>m(l.boolean(e),"boolean",e),symbol:e=>m(l.symbol(e),"symbol",e),numericString:e=>m(l.numericString(e),"string with a number",e),array:(e,t)=>{m(l.array(e),"Array",e),t&&e.forEach(t)},buffer:e=>m(l.buffer(e),"Buffer",e),nullOrUndefined:e=>m(l.nullOrUndefined(e),"null or undefined",e),object:e=>m(l.object(e),"Object",e),iterable:e=>m(l.iterable(e),"Iterable",e),asyncIterable:e=>m(l.asyncIterable(e),"AsyncIterable",e),generator:e=>m(l.generator(e),"Generator",e),asyncGenerator:e=>m(l.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>m(l.nativePromise(e),"native Promise",e),promise:e=>m(l.promise(e),"Promise",e),generatorFunction:e=>m(l.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>m(l.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>m(l.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>m(l.boundFunction(e),"Function",e),regExp:e=>m(l.regExp(e),"RegExp",e),date:e=>m(l.date(e),"Date",e),error:e=>m(l.error(e),"Error",e),map:e=>m(l.map(e),"Map",e),set:e=>m(l.set(e),"Set",e),weakMap:e=>m(l.weakMap(e),"WeakMap",e),weakSet:e=>m(l.weakSet(e),"WeakSet",e),int8Array:e=>m(l.int8Array(e),"Int8Array",e),uint8Array:e=>m(l.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>m(l.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>m(l.int16Array(e),"Int16Array",e),uint16Array:e=>m(l.uint16Array(e),"Uint16Array",e),int32Array:e=>m(l.int32Array(e),"Int32Array",e),uint32Array:e=>m(l.uint32Array(e),"Uint32Array",e),float32Array:e=>m(l.float32Array(e),"Float32Array",e),float64Array:e=>m(l.float64Array(e),"Float64Array",e),bigInt64Array:e=>m(l.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>m(l.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>m(l.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>m(l.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>m(l.dataView(e),"DataView",e),urlInstance:e=>m(l.urlInstance(e),"URL",e),urlString:e=>m(l.urlString(e),"string with a URL",e),truthy:e=>m(l.truthy(e),"truthy",e),falsy:e=>m(l.falsy(e),"falsy",e),nan:e=>m(l.nan(e),"NaN",e),primitive:e=>m(l.primitive(e),"primitive",e),integer:e=>m(l.integer(e),"integer",e),safeInteger:e=>m(l.safeInteger(e),"integer",e),plainObject:e=>m(l.plainObject(e),"plain object",e),typedArray:e=>m(l.typedArray(e),"TypedArray",e),arrayLike:e=>m(l.arrayLike(e),"array-like",e),domElement:e=>m(l.domElement(e),"HTMLElement",e),observable:e=>m(l.observable(e),"Observable",e),nodeStream:e=>m(l.nodeStream(e),"Node.js Stream",e),infinite:e=>m(l.infinite(e),"infinite number",e),emptyArray:e=>m(l.emptyArray(e),"empty array",e),nonEmptyArray:e=>m(l.nonEmptyArray(e),"non-empty array",e),emptyString:e=>m(l.emptyString(e),"empty string",e),nonEmptyString:e=>m(l.nonEmptyString(e),"non-empty string",e),emptyStringOrWhitespace:e=>m(l.emptyStringOrWhitespace(e),"empty string or whitespace",e),emptyObject:e=>m(l.emptyObject(e),"empty object",e),nonEmptyObject:e=>m(l.nonEmptyObject(e),"non-empty object",e),emptySet:e=>m(l.emptySet(e),"empty set",e),nonEmptySet:e=>m(l.nonEmptySet(e),"non-empty set",e),emptyMap:e=>m(l.emptyMap(e),"empty map",e),nonEmptyMap:e=>m(l.nonEmptyMap(e),"non-empty map",e),evenInteger:e=>m(l.evenInteger(e),"even integer",e),oddInteger:e=>m(l.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>m(l.directInstanceOf(e,t),"T",e),inRange:(e,t)=>m(l.inRange(e,t),"in range",e),any:(e,...t)=>m(l.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:!0}),all:(e,...t)=>m(l.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:!0})},Object.defineProperties(l,{class:{value:l.class_},function:{value:l.function_},null:{value:l.null_}}),Object.defineProperties(t.assert,{class:{value:t.assert.class_},function:{value:t.assert.function_},null:{value:t.assert.null_}}),t.default=l,e.exports=l,e.exports.default=l,e.exports.assert=t.assert},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("events")},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.CancelError=t.ParseError=void 0;const n=r(7);class i extends n.RequestError{constructor(e,t){const{options:r}=t.request;super(`${e.message} in "${r.url.toString()}"`,e,t.request),this.name="ParseError"}}t.ParseError=i;class a extends n.RequestError{constructor(e){super("Promise was canceled",{},e),this.name="CancelError"}get isCanceled(){return!0}}t.CancelError=a,o(r(7),t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedProtocolError=t.ReadError=t.TimeoutError=t.UploadError=t.CacheError=t.HTTPError=t.MaxRedirectsError=t.RequestError=t.setNonEnumerableProperties=t.knownHookEvents=t.withoutBody=t.kIsNormalizedAlready=void 0;const s=r(10),o=r(0),n=r(11),i=r(1),a=r(4),c=r(4),u=r(8),l=r(35),h=r(37),d=r(40),f=r(55),p=r(57),m=r(12),y=r(3),b=r(64),g=r(26),v=r(27),w=r(65),_=r(67),E=r(68),P=r(69),S=r(28),T=r(70),k=r(29),x=r(71),O=r(72),C=r(73);let j;const A=Symbol("request"),R=Symbol("response"),q=Symbol("responseSize"),L=Symbol("downloadedSize"),H=Symbol("bodySize"),I=Symbol("uploadedSize"),U=Symbol("serverResponsesPiped"),N=Symbol("unproxyEvents"),B=Symbol("isFromCache"),M=Symbol("cancelTimeouts"),z=Symbol("startedReading"),D=Symbol("stopReading"),$=Symbol("triggerRead"),F=Symbol("body"),W=Symbol("jobs"),V=Symbol("originalResponse"),G=Symbol("retryTimeout");t.kIsNormalizedAlready=Symbol("isNormalizedAlready");const J=y.default.string(process.versions.brotli);t.withoutBody=new Set(["GET","HEAD"]),t.knownHookEvents=["init","beforeRequest","beforeRedirect","beforeError","beforeRetry","afterResponse"];const K=new P.default,Q=new Set([300,301,302,303,304,307,308]),Y=["context","body","json","form"];t.setNonEnumerableProperties=(e,t)=>{const r={};for(const t of e)if(t)for(const e of Y)e in t&&(r[e]={writable:!0,configurable:!0,enumerable:!1,value:t[e]});Object.defineProperties(t,r)};class Z extends Error{constructor(e,t,r){var s;if(super(e),Error.captureStackTrace(this,this.constructor),this.name="RequestError",this.code=t.code,r instanceof ae?(Object.defineProperty(this,"request",{enumerable:!1,value:r}),Object.defineProperty(this,"response",{enumerable:!1,value:r[R]}),Object.defineProperty(this,"options",{enumerable:!1,value:r.options})):Object.defineProperty(this,"options",{enumerable:!1,value:r}),this.timings=null===(s=this.request)||void 0===s?void 0:s.timings,y.default.string(t.stack)&&y.default.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length,r=this.stack.slice(e).split("\n").reverse(),s=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();for(;0!==s.length&&s[0]===r[0];)r.shift();this.stack=`${this.stack.slice(0,e)}${r.reverse().join("\n")}${s.reverse().join("\n")}`}}}t.RequestError=Z;class X extends Z{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e),this.name="MaxRedirectsError"}}t.MaxRedirectsError=X;class ee extends Z{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request),this.name="HTTPError"}}t.HTTPError=ee;class te extends Z{constructor(e,t){super(e.message,e,t),this.name="CacheError"}}t.CacheError=te;class re extends Z{constructor(e,t){super(e.message,e,t),this.name="UploadError"}}t.UploadError=re;class se extends Z{constructor(e,t,r){super(e.message,e,r),this.name="TimeoutError",this.event=e.event,this.timings=t}}t.TimeoutError=se;class oe extends Z{constructor(e,t){super(e.message,e,t),this.name="ReadError"}}t.ReadError=oe;class ne extends Z{constructor(e){super(`Unsupported protocol "${e.url.protocol}"`,{},e),this.name="UnsupportedProtocolError"}}t.UnsupportedProtocolError=ne;const ie=["socket","connect","continue","information","upgrade","timeout"];class ae extends o.Duplex{constructor(e,r={},s){super({autoDestroy:!1,highWaterMark:0}),this[L]=0,this[I]=0,this.requestInitialized=!1,this[U]=new Set,this.redirects=[],this[D]=!1,this[$]=!1,this[W]=[],this.retryCount=0,this._progressCallbacks=[];const o=()=>this._unlockWrite(),i=()=>this._lockWrite();this.on("pipe",e=>{e.prependListener("data",o),e.on("data",i),e.prependListener("end",o),e.on("end",i)}),this.on("unpipe",e=>{e.off("data",o),e.off("data",i),e.off("end",o),e.off("end",i)}),this.on("pipe",e=>{e instanceof c.IncomingMessage&&(this.options.headers={...e.headers,...this.options.headers})});const{json:a,body:u,form:l}=r;if((a||u||l)&&this._lockWrite(),t.kIsNormalizedAlready in r)this.options=r;else try{this.options=this.constructor.normalizeArguments(e,r,s)}catch(e){return y.default.nodeStream(r.body)&&r.body.destroy(),void this.destroy(e)}(async()=>{var e;try{this.options.body instanceof n.ReadStream&&await(async e=>new Promise((t,r)=>{const s=e=>{r(e)};e.pending||t(),e.once("error",s),e.once("ready",()=>{e.off("error",s),t()})}))(this.options.body);const{url:t}=this.options;if(!t)throw new TypeError("Missing `url` property");if(this.requestUrl=t.toString(),decodeURI(this.requestUrl),await this._finalizeBody(),await this._makeRequest(),this.destroyed)return void(null===(e=this[A])||void 0===e||e.destroy());for(const e of this[W])e();this[W].length=0,this.requestInitialized=!0}catch(e){if(e instanceof Z)return void this._beforeError(e);this.destroyed||this.destroy(e)}})()}static normalizeArguments(e,r,o){var n,a,c,u,l;const f=r;if(y.default.object(e)&&!y.default.urlInstance(e))r={...o,...e,...r};else{if(e&&r&&void 0!==r.url)throw new TypeError("The `url` option is mutually exclusive with the `input` argument");r={...o,...r},void 0!==e&&(r.url=e),y.default.urlInstance(r.url)&&(r.url=new i.URL(r.url.toString()))}if(!1===r.cache&&(r.cache=void 0),!1===r.dnsCache&&(r.dnsCache=void 0),y.assert.any([y.default.string,y.default.undefined],r.method),y.assert.any([y.default.object,y.default.undefined],r.headers),y.assert.any([y.default.string,y.default.urlInstance,y.default.undefined],r.prefixUrl),y.assert.any([y.default.object,y.default.undefined],r.cookieJar),y.assert.any([y.default.object,y.default.string,y.default.undefined],r.searchParams),y.assert.any([y.default.object,y.default.string,y.default.undefined],r.cache),y.assert.any([y.default.object,y.default.number,y.default.undefined],r.timeout),y.assert.any([y.default.object,y.default.undefined],r.context),y.assert.any([y.default.object,y.default.undefined],r.hooks),y.assert.any([y.default.boolean,y.default.undefined],r.decompress),y.assert.any([y.default.boolean,y.default.undefined],r.ignoreInvalidCookies),y.assert.any([y.default.boolean,y.default.undefined],r.followRedirect),y.assert.any([y.default.number,y.default.undefined],r.maxRedirects),y.assert.any([y.default.boolean,y.default.undefined],r.throwHttpErrors),y.assert.any([y.default.boolean,y.default.undefined],r.http2),y.assert.any([y.default.boolean,y.default.undefined],r.allowGetBody),y.assert.any([y.default.string,y.default.undefined],r.localAddress),y.assert.any([T.isDnsLookupIpVersion,y.default.undefined],r.dnsLookupIpVersion),y.assert.any([y.default.object,y.default.undefined],r.https),y.assert.any([y.default.boolean,y.default.undefined],r.rejectUnauthorized),r.https&&(y.assert.any([y.default.boolean,y.default.undefined],r.https.rejectUnauthorized),y.assert.any([y.default.function_,y.default.undefined],r.https.checkServerIdentity),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.certificateAuthority),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.key),y.assert.any([y.default.string,y.default.object,y.default.array,y.default.undefined],r.https.certificate),y.assert.any([y.default.string,y.default.undefined],r.https.passphrase),y.assert.any([y.default.string,y.default.buffer,y.default.array,y.default.undefined],r.https.pfx)),y.assert.any([y.default.object,y.default.undefined],r.cacheOptions),y.default.string(r.method)?r.method=r.method.toUpperCase():r.method="GET",r.headers===(null==o?void 0:o.headers)?r.headers={...r.headers}:r.headers=m({...null==o?void 0:o.headers,...r.headers}),"slashes"in r)throw new TypeError("The legacy `url.Url` has been deprecated. Use `URL` instead.");if("auth"in r)throw new TypeError("Parameter `auth` is deprecated. Use `username` / `password` instead.");if("searchParams"in r&&r.searchParams&&r.searchParams!==(null==o?void 0:o.searchParams)){let e;if(y.default.string(r.searchParams)||r.searchParams instanceof i.URLSearchParams)e=new i.URLSearchParams(r.searchParams);else{!function(e){for(const t in e){const r=e[t];if(!(y.default.string(r)||y.default.number(r)||y.default.boolean(r)||y.default.null_(r)||y.default.undefined(r)))throw new TypeError(`The \`searchParams\` value '${String(r)}' must be a string, number, boolean or null`)}}(r.searchParams),e=new i.URLSearchParams;for(const t in r.searchParams){const s=r.searchParams[t];null===s?e.append(t,""):void 0!==s&&e.append(t,s)}}null===(n=null==o?void 0:o.searchParams)||void 0===n||n.forEach((t,r)=>{e.has(r)||e.append(r,t)}),r.searchParams=e}if(r.username=null!==(a=r.username)&&void 0!==a?a:"",r.password=null!==(c=r.password)&&void 0!==c?c:"",y.default.undefined(r.prefixUrl)?r.prefixUrl=null!==(u=null==o?void 0:o.prefixUrl)&&void 0!==u?u:"":(r.prefixUrl=r.prefixUrl.toString(),""===r.prefixUrl||r.prefixUrl.endsWith("/")||(r.prefixUrl+="/")),y.default.string(r.url)){if(r.url.startsWith("/"))throw new Error("`input` must not start with a slash when using `prefixUrl`");r.url=E.default(r.prefixUrl+r.url,r)}else(y.default.undefined(r.url)&&""!==r.prefixUrl||r.protocol)&&(r.url=E.default(r.prefixUrl,r));if(r.url){"port"in r&&delete r.port;let{prefixUrl:e}=r;Object.defineProperty(r,"prefixUrl",{set:t=>{const s=r.url;if(!s.href.startsWith(t))throw new Error(`Cannot change \`prefixUrl\` from ${e} to ${t}: ${s.href}`);r.url=new i.URL(t+s.href.slice(e.length)),e=t},get:()=>e});let{protocol:t}=r.url;if("unix:"===t&&(t="http:",r.url=new i.URL(`http://unix${r.url.pathname}${r.url.search}`)),r.searchParams&&(r.url.search=r.searchParams.toString()),"http:"!==t&&"https:"!==t)throw new ne(r);""===r.username?r.username=r.url.username:r.url.username=r.username,""===r.password?r.password=r.url.password:r.url.password=r.password}const{cookieJar:p}=r;if(p){let{setCookie:e,getCookieString:t}=p;y.assert.function_(e),y.assert.function_(t),4===e.length&&0===t.length&&(e=s.promisify(e.bind(r.cookieJar)),t=s.promisify(t.bind(r.cookieJar)),r.cookieJar={setCookie:e,getCookieString:t})}const{cache:b}=r;if(b&&(K.has(b)||K.set(b,new d((e,t)=>{const r=e[A](e,t);return y.default.promise(r)&&(r.once=(e,t)=>{if("error"===e)r.catch(t);else{if("abort"!==e)throw new Error("Unknown HTTP2 promise event: "+e);(async()=>{try{(await r).once("abort",t)}catch(e){}})()}return r}),r},b))),r.cacheOptions={...r.cacheOptions},!0===r.dnsCache)j||(j=new h.default),r.dnsCache=j;else if(!y.default.undefined(r.dnsCache)&&!r.dnsCache.lookup)throw new TypeError("Parameter `dnsCache` must be a CacheableLookup instance or a boolean, got "+y.default(r.dnsCache));y.default.number(r.timeout)?r.timeout={request:r.timeout}:o&&r.timeout!==o.timeout?r.timeout={...o.timeout,...r.timeout}:r.timeout={...r.timeout},r.context||(r.context={});const g=r.hooks===(null==o?void 0:o.hooks);r.hooks={...r.hooks};for(const e of t.knownHookEvents)if(e in r.hooks){if(!y.default.array(r.hooks[e]))throw new TypeError(`Parameter \`${e}\` must be an Array, got ${y.default(r.hooks[e])}`);r.hooks[e]=[...r.hooks[e]]}else r.hooks[e]=[];if(o&&!g)for(const e of t.knownHookEvents){o.hooks[e].length>0&&(r.hooks[e]=[...o.hooks[e],...r.hooks[e]])}if("family"in r&&x.default('"options.family" was never documented, please use "options.dnsLookupIpVersion"'),(null==o?void 0:o.https)&&(r.https={...o.https,...r.https}),"rejectUnauthorized"in r&&x.default('"options.rejectUnauthorized" is now deprecated, please use "options.https.rejectUnauthorized"'),"checkServerIdentity"in r&&x.default('"options.checkServerIdentity" was never documented, please use "options.https.checkServerIdentity"'),"ca"in r&&x.default('"options.ca" was never documented, please use "options.https.certificateAuthority"'),"key"in r&&x.default('"options.key" was never documented, please use "options.https.key"'),"cert"in r&&x.default('"options.cert" was never documented, please use "options.https.certificate"'),"passphrase"in r&&x.default('"options.passphrase" was never documented, please use "options.https.passphrase"'),"pfx"in r&&x.default('"options.pfx" was never documented, please use "options.https.pfx"'),"followRedirects"in r)throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.");if(r.agent)for(const e in r.agent)if("http"!==e&&"https"!==e&&"http2"!==e)throw new TypeError(`Expected the \`options.agent\` properties to be \`http\`, \`https\` or \`http2\`, got \`${e}\``);return r.maxRedirects=null!==(l=r.maxRedirects)&&void 0!==l?l:0,t.setNonEnumerableProperties([o,f],r),O.default(r,o)}_lockWrite(){const e=()=>{throw new TypeError("The payload has been already provided")};this.write=e,this.end=e}_unlockWrite(){this.write=super.write,this.end=super.end}async _finalizeBody(){const{options:e}=this,{headers:r}=e,s=!y.default.undefined(e.form),n=!y.default.undefined(e.json),a=!y.default.undefined(e.body),c=s||n||a,u=t.withoutBody.has(e.method)&&!("GET"===e.method&&e.allowGetBody);if(this._cannotHaveBody=u,c){if(u)throw new TypeError(`The \`${e.method}\` method cannot be used with a body`);if([a,s,n].filter(e=>e).length>1)throw new TypeError("The `body`, `json` and `form` options are mutually exclusive");if(a&&!(e.body instanceof o.Readable)&&!y.default.string(e.body)&&!y.default.buffer(e.body)&&!g.default(e.body))throw new TypeError("The `body` option must be a stream.Readable, string or Buffer");if(s&&!y.default.object(e.form))throw new TypeError("The `form` option must be an Object");{const t=!y.default.string(r["content-type"]);a?(g.default(e.body)&&t&&(r["content-type"]="multipart/form-data; boundary="+e.body.getBoundary()),this[F]=e.body):s?(t&&(r["content-type"]="application/x-www-form-urlencoded"),this[F]=new i.URLSearchParams(e.form).toString()):(t&&(r["content-type"]="application/json"),this[F]=e.stringifyJson(e.json));const o=await b.default(this[F],e.headers);y.default.undefined(r["content-length"])&&y.default.undefined(r["transfer-encoding"])&&(u||y.default.undefined(o)||(r["content-length"]=String(o)))}}else u?this._lockWrite():this._unlockWrite();this[H]=Number(r["content-length"])||void 0}async _onResponseBase(e){const{options:t}=this,{url:r}=t;this[V]=e,t.decompress&&(e=f(e));const s=e.statusCode,o=e;o.statusMessage=o.statusMessage?o.statusMessage:a.STATUS_CODES[s],o.url=t.url.toString(),o.requestUrl=this.requestUrl,o.redirectUrls=this.redirects,o.request=this,o.isFromCache=e.fromCache||!1,o.ip=this.ip,o.retryCount=this.retryCount,this[B]=o.isFromCache,this[q]=Number(e.headers["content-length"])||void 0,this[R]=e,e.once("end",()=>{this[q]=this[L],this.emit("downloadProgress",this.downloadProgress)}),e.once("error",t=>{e.destroy(),this._beforeError(new oe(t,this))}),e.once("aborted",()=>{this._beforeError(new oe({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}),this.emit("downloadProgress",this.downloadProgress);const n=e.headers["set-cookie"];if(y.default.object(t.cookieJar)&&n){let e=n.map(async e=>t.cookieJar.setCookie(e,r.toString()));t.ignoreInvalidCookies&&(e=e.map(async e=>e.catch(()=>{})));try{await Promise.all(e)}catch(e){return void this._beforeError(e)}}if(t.followRedirect&&e.headers.location&&Q.has(s)){e.resume(),this[A]&&(this[M](),delete this[A],this[N]());if(!(303===s&&"GET"!==t.method&&"HEAD"!==t.method)&&t.methodRewriting||(t.method="GET","body"in t&&delete t.body,"json"in t&&delete t.json,"form"in t&&delete t.form,this[F]=void 0,delete t.headers["content-length"]),this.redirects.length>=t.maxRedirects)return void this._beforeError(new X(this));try{const s=Buffer.from(e.headers.location,"binary").toString(),n=new i.URL(s,r),a=n.toString();decodeURI(a),n.hostname!==r.hostname||n.port!==r.port?("host"in t.headers&&delete t.headers.host,"cookie"in t.headers&&delete t.headers.cookie,"authorization"in t.headers&&delete t.headers.authorization,(t.username||t.password)&&(t.username="",t.password="")):(n.username=t.username,n.password=t.password),this.redirects.push(a),t.url=n;for(const e of t.hooks.beforeRedirect)await e(t,o);this.emit("redirect",o,t),await this._makeRequest()}catch(e){return void this._beforeError(e)}}else if(t.isStream&&t.throwHttpErrors&&!k.isResponseOk(o))this._beforeError(new ee(o));else{e.on("readable",()=>{this[$]&&this._read()}),this.on("resume",()=>{e.resume()}),this.on("pause",()=>{e.pause()}),e.once("end",()=>{this.push(null)}),this.emit("response",e);for(const r of this[U])if(!r.headersSent){for(const s in e.headers){const o=!t.decompress||"content-encoding"!==s,n=e.headers[s];o&&r.setHeader(s,n)}r.statusCode=s}}}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this,{timeout:r,url:s}=t;l.default(e),this[M]=w.default(e,r,s);const o=t.cache?"cacheableResponse":"response";e.once(o,e=>{this._onResponse(e)}),e.once("error",t=>{var r;e.destroy(),null===(r=e.res)||void 0===r||r.removeAllListeners("end"),t=t instanceof w.TimeoutError?new se(t,this.timings,this):new Z(t.message,t,this),this._beforeError(t)}),this[N]=v.default(e,this,ie),this[A]=e,this.emit("uploadProgress",this.uploadProgress);const n=this[F],i=0===this.redirects.length?this:e;y.default.nodeStream(n)?(n.pipe(i),n.once("error",e=>{this._beforeError(new re(e,this))})):(this._unlockWrite(),y.default.undefined(n)?(this._cannotHaveBody||this._noPipe)&&(i.end(),this._lockWrite()):(this._writeRequest(n,void 0,()=>{}),i.end(),this._lockWrite())),this.emit("request",e)}async _createCacheableRequest(e,t){return new Promise((r,s)=>{let o;Object.assign(t,_.default(e)),delete t.url;const n=K.get(t.cache)(t,async e=>{e._readableState.autoDestroy=!1,o&&(await o).emit("cacheableResponse",e),r(e)});t.url=e,n.once("error",s),n.once("request",async e=>{o=e,r(o)})})}async _makeRequest(){var e,t,r,s,o;const{options:n}=this,{headers:i}=n;for(const e in i)if(y.default.undefined(i[e]))delete i[e];else if(y.default.null_(i[e]))throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`);if(n.decompress&&y.default.undefined(i["accept-encoding"])&&(i["accept-encoding"]=J?"gzip, deflate, br":"gzip, deflate"),n.cookieJar){const e=await n.cookieJar.getCookieString(n.url.toString());y.default.nonEmptyString(e)&&(n.headers.cookie=e)}for(const e of n.hooks.beforeRequest){const t=await e(n);if(!y.default.undefined(t)){n.request=()=>t;break}}n.body&&this[F]!==n.body&&(this[F]=n.body);const{agent:c,request:l,timeout:h,url:f}=n;if(n.dnsCache&&!("lookup"in n)&&(n.lookup=n.dnsCache.lookup),"unix"===f.hostname){const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${f.pathname}${f.search}`);if(null==e?void 0:e.groups){const{socketPath:t,path:r}=e.groups;Object.assign(n,{socketPath:t,path:r,host:""})}}const m="https:"===f.protocol;let b;b=n.http2?p.auto:m?u.request:a.request;const g=null!==(e=n.request)&&void 0!==e?e:b,v=n.cache?this._createCacheableRequest:g;c&&!n.http2&&(n.agent=c[m?"https":"http"]),n[A]=g,delete n.request,delete n.timeout;const w=n;if(w.shared=null===(t=n.cacheOptions)||void 0===t?void 0:t.shared,w.cacheHeuristic=null===(r=n.cacheOptions)||void 0===r?void 0:r.cacheHeuristic,w.immutableMinTimeToLive=null===(s=n.cacheOptions)||void 0===s?void 0:s.immutableMinTimeToLive,w.ignoreCargoCult=null===(o=n.cacheOptions)||void 0===o?void 0:o.ignoreCargoCult,void 0!==n.dnsLookupIpVersion)try{w.family=T.dnsLookupIpVersionToFamily(n.dnsLookupIpVersion)}catch(e){throw new Error("Invalid `dnsLookupIpVersion` option value")}n.https&&("rejectUnauthorized"in n.https&&(w.rejectUnauthorized=n.https.rejectUnauthorized),n.https.checkServerIdentity&&(w.checkServerIdentity=n.https.checkServerIdentity),n.https.certificateAuthority&&(w.ca=n.https.certificateAuthority),n.https.certificate&&(w.cert=n.https.certificate),n.https.key&&(w.key=n.https.key),n.https.passphrase&&(w.passphrase=n.https.passphrase),n.https.pfx&&(w.pfx=n.https.pfx));try{let e=await v(f,w);y.default.undefined(e)&&(e=b(f,w)),n.request=l,n.timeout=h,n.agent=c,n.https&&("rejectUnauthorized"in n.https&&delete w.rejectUnauthorized,n.https.checkServerIdentity&&delete w.checkServerIdentity,n.https.certificateAuthority&&delete w.ca,n.https.certificate&&delete w.cert,n.https.key&&delete w.key,n.https.passphrase&&delete w.passphrase,n.https.pfx&&delete w.pfx),_=e,y.default.object(_)&&!("statusCode"in _)?this._onRequest(e):this.writable?(this.once("finish",()=>{this._onResponse(e)}),this._unlockWrite(),this.end(),this._lockWrite()):this._onResponse(e)}catch(e){if(e instanceof d.CacheError)throw new te(e,this);throw new Z(e.message,e,this)}var _}async _error(e){try{for(const t of this.options.hooks.beforeError)e=await t(e)}catch(t){e=new Z(t.message,t,this)}this.destroy(e)}_beforeError(e){if(this[D])return;const{options:t}=this,r=this.retryCount+1;this[D]=!0,e instanceof Z||(e=new Z(e.message,e,this));const s=e,{response:o}=s;(async()=>{if(o&&!o.body){o.setEncoding(this._readableState.encoding);try{o.rawBody=await S.default(o),o.body=o.rawBody.toString()}catch(e){}}if(0!==this.listenerCount("retry")){let n;try{let e;o&&"retry-after"in o.headers&&(e=Number(o.headers["retry-after"]),Number.isNaN(e)?(e=Date.parse(o.headers["retry-after"])-Date.now(),e<=0&&(e=1)):e*=1e3),n=await t.retry.calculateDelay({attemptCount:r,retryOptions:t.retry,error:s,retryAfter:e,computedValue:C.default({attemptCount:r,retryOptions:t.retry,error:s,retryAfter:e,computedValue:0})})}catch(e){return void this._error(new Z(e.message,e,this))}if(n){const t=async()=>{try{for(const e of this.options.hooks.beforeRetry)await e(this.options,s,r)}catch(t){return void this._error(new Z(t.message,e,this))}this.destroyed||(this.destroy(),this.emit("retry",r,e))};return void(this[G]=setTimeout(t,n))}}this._error(s)})()}_read(){this[$]=!0;const e=this[R];if(e&&!this[D]){let t;for(e.readableLength&&(this[$]=!1);null!==(t=e.read());){this[L]+=t.length,this[z]=!0;const e=this.downloadProgress;e.percent<1&&this.emit("downloadProgress",e),this.push(t)}}}_write(e,t,r){const s=()=>{this._writeRequest(e,t,r)};this.requestInitialized?s():this[W].push(s)}_writeRequest(e,t,r){this[A].destroyed||(this._progressCallbacks.push(()=>{this[I]+=Buffer.byteLength(e,t);const r=this.uploadProgress;r.percent<1&&this.emit("uploadProgress",r)}),this[A].write(e,t,e=>{!e&&this._progressCallbacks.length>0&&this._progressCallbacks.shift()(),r(e)}))}_final(e){const t=()=>{for(;0!==this._progressCallbacks.length;)this._progressCallbacks.shift()();A in this?this[A].destroyed?e():this[A].end(t=>{t||(this[H]=this[I],this.emit("uploadProgress",this.uploadProgress),this[A].emit("upload-complete")),e(t)}):e()};this.requestInitialized?t():this[W].push(t)}_destroy(e,t){var r;this[D]=!0,clearTimeout(this[G]),A in this&&(this[M](),(null===(r=this[R])||void 0===r?void 0:r.complete)||this[A].destroy()),null===e||y.default.undefined(e)||e instanceof Z||(e=new Z(e.message,e,this)),t(e)}get _isAboutToError(){return this[D]}get ip(){var e;return null===(e=this.socket)||void 0===e?void 0:e.remoteAddress}get aborted(){var e,t,r;return(null!==(t=null===(e=this[A])||void 0===e?void 0:e.destroyed)&&void 0!==t?t:this.destroyed)&&!(null===(r=this[V])||void 0===r?void 0:r.complete)}get socket(){var e,t;return null!==(t=null===(e=this[A])||void 0===e?void 0:e.socket)&&void 0!==t?t:void 0}get downloadProgress(){let e;return e=this[q]?this[L]/this[q]:this[q]===this[L]?1:0,{percent:e,transferred:this[L],total:this[q]}}get uploadProgress(){let e;return e=this[H]?this[I]/this[H]:this[H]===this[I]?1:0,{percent:e,transferred:this[I],total:this[H]}}get timings(){var e;return null===(e=this[A])||void 0===e?void 0:e.timings}get isFromCache(){return this[B]}pipe(e,t){if(this[z])throw new Error("Failed to pipe. The response has been emitted already.");return e instanceof c.ServerResponse&&this[U].add(e),super.pipe(e,t)}unpipe(e){return e instanceof c.ServerResponse&&this[U].delete(e),super.unpipe(e),this}}t.default=ae},function(e,t){e.exports=require("https")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=t.pick=t.assertNever=void 0,t.assertNever=function(e){throw new Error("Unexpected value. Should have been never.")},t.pick=function(e,t){const r=t.map(t=>[t,null==e?void 0:e[t]]);return Object.fromEntries(r)},t.isObject=function(e){return"object"==typeof e&&null!==e}},function(e,t){e.exports=require("util")},function(e,t){e.exports=require("fs")},function(e,t,r){"use strict";e.exports=e=>{const t={};for(const[r,s]of Object.entries(e))t[r.toLowerCase()]=s;return t}},function(e,t){e.exports=require("http2")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logLevelSeverity=t.makeConsoleLogger=t.LogLevel=void 0;const s=r(9);var o;!function(e){e.DEBUG="debug",e.INFO="info",e.WARN="warn",e.ERROR="error"}(o=t.LogLevel||(t.LogLevel={})),t.makeConsoleLogger=function(e){return(t,r,s)=>{console[t](`${e} ${t}:`,r,s)}},t.logLevelSeverity=function(e){switch(e){case o.DEBUG:return 20;case o.INFO:return 40;case o.WARN:return 60;case o.ERROR:return 80;default:return s.assertNever(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildRequestError=t.APIResponseError=t.APIErrorCode=t.HTTPResponseError=t.RequestTimeoutError=void 0;const s=r(9);class o extends Error{constructor(e="Request to Notion API has timed out"){super(e),this.code="notionhq_client_request_timeout",this.name="RequestTimeoutError"}static isRequestTimeoutError(e){return e instanceof Error&&"RequestTimeoutError"===e.name&&"code"in e&&e.code===o.prototype.code}}t.RequestTimeoutError=o;class n extends Error{constructor(e,t){super(null!=t?t:"Request to Notion API failed with status: "+e.statusCode),this.code="notionhq_client_response_error",this.name="HTTPResponseError",this.status=e.statusCode,this.headers=e.headers,this.body=e.rawBody.toString()}static isHTTPResponseError(e){return e instanceof Error&&"HTTPResponseError"===e.name&&"code"in e&&e.code===n.prototype.code}}var i;t.HTTPResponseError=n,function(e){e.Unauthorized="unauthorized",e.RestrictedResource="restricted_resource",e.ObjectNotFound="object_not_found",e.RateLimited="rate_limited",e.InvalidJSON="invalid_json",e.InvalidRequestURL="invalid_request_url",e.InvalidRequest="invalid_request",e.ValidationError="validation_error",e.ConflictError="conflict_error",e.InternalServerError="internal_server_error",e.ServiceUnavailable="service_unavailable"}(i=t.APIErrorCode||(t.APIErrorCode={}));class a extends n{constructor(e,t){super(e,t.message),this.name="APIResponseError",this.code=t.code}static isAPIResponseError(e){return e instanceof Error&&"APIResponseError"===e.name&&"code"in e&&c(e.code)}}function c(e){return"string"==typeof e&&Object.values(i).includes(e)}t.APIResponseError=a,t.buildRequestError=function(e){if(function(e){return e instanceof Error&&"TimeoutError"===e.name&&"event"in e&&"string"==typeof e.event&&s.isObject(e.request)&&s.isObject(e.timings)}(e))return new o;if(function(e){return e instanceof Error&&"HTTPError"===e.name&&"request"in e&&s.isObject(e.request)&&"response"in e&&s.isObject(e.response)&&"timings"in e&&s.isObject(e.timings)}(e)){const t=function(e){if("string"!=typeof e)return;let t;try{t=JSON.parse(e)}catch(e){return}if(!s.isObject(t)||"string"!=typeof t.message||!c(t.code))return;return{...t,code:t.code,message:t.message}}(e.response.body);return void 0!==t?new a(e.response,t):new n(e.response)}}},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.defaultHandler=void 0;const n=r(3),i=r(17),a=r(75),c=r(7),u=r(76),l={RequestError:i.RequestError,CacheError:i.CacheError,ReadError:i.ReadError,HTTPError:i.HTTPError,MaxRedirectsError:i.MaxRedirectsError,TimeoutError:i.TimeoutError,ParseError:i.ParseError,CancelError:i.CancelError,UnsupportedProtocolError:i.UnsupportedProtocolError,UploadError:i.UploadError},h=async e=>new Promise(t=>{setTimeout(t,e)}),{normalizeArguments:d}=c.default,f=(...e)=>{let t;for(const r of e)t=d(void 0,r,t);return t},p=e=>e.isStream?new c.default(void 0,e):i.default(e),m=e=>"defaults"in e&&"options"in e.defaults,y=["get","post","put","patch","head","delete"];t.defaultHandler=(e,t)=>t(e);const b=(e,t)=>{if(e)for(const r of e)r(t)},g=e=>{e._rawHandlers=e.handlers,e.handlers=e.handlers.map(e=>(t,r)=>{let s;const o=e(t,e=>(s=r(e),s));if(o!==s&&!t.isStream&&s){const e=o,{then:t,catch:r,finally:n}=e;Object.setPrototypeOf(e,Object.getPrototypeOf(s)),Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)),e.then=t,e.catch=r,e.finally=n}return o});const r=(t,r={},s)=>{var o,u;let l=0;const h=t=>e.handlers[l++](t,l===e.handlers.length?p:h);if(n.default.plainObject(t)){const e={...t,...r};c.setNonEnumerableProperties([t,r],e),r=e,t=void 0}try{let n;try{b(e.options.hooks.init,r),b(null===(o=r.hooks)||void 0===o?void 0:o.init,r)}catch(e){n=e}const a=d(t,r,null!=s?s:e.options);if(a[c.kIsNormalizedAlready]=!0,n)throw new i.RequestError(n.message,n,a);return h(a)}catch(t){if(r.isStream)throw t;return a.default(t,e.options.hooks.beforeError,null===(u=r.hooks)||void 0===u?void 0:u.beforeError)}};r.extend=(...r)=>{const s=[e.options];let o,n=[...e._rawHandlers];for(const e of r)m(e)?(s.push(e.defaults.options),n.push(...e.defaults._rawHandlers),o=e.defaults.mutableDefaults):(s.push(e),"handlers"in e&&n.push(...e.handlers),o=e.mutableDefaults);return n=n.filter(e=>e!==t.defaultHandler),0===n.length&&n.push(t.defaultHandler),g({options:f(...s),handlers:n,mutableDefaults:Boolean(o)})};const s=async function*(t,s){let o=d(t,s,e.options);o.resolveBodyOnly=!1;const i=o.pagination;if(!n.default.object(i))throw new TypeError("`options.pagination` must be implemented");const a=[];let{countLimit:c}=i,u=0;for(;u<i.requestLimit;){0!==u&&await h(i.backoff);const e=await r(void 0,void 0,o),t=await i.transform(e),s=[];for(const e of t)if(i.filter(e,a,s)){if(!i.shouldContinue(e,a,s))return;if(yield e,i.stackAllItems&&a.push(e),s.push(e),--c<=0)return}const n=i.paginate(e,a,s);if(!1===n)return;n===e.request.options?o=e.request.options:void 0!==n&&(o=d(void 0,n,o)),u++}};(r.paginate=s).all=async(e,t)=>{const r=[];for await(const o of s(e,t))r.push(o);return r},r.paginate.each=s,r.stream=(e,t)=>r(e,{...t,isStream:!0});for(const e of y)r[e]=(t,s)=>r(t,{...s,method:e}),r.stream[e]=(t,s)=>r(t,{...s,method:e,isStream:!0});return Object.assign(r,l),Object.defineProperty(r,"defaults",{value:e.mutableDefaults?e:u.default(e),writable:e.mutableDefaults,configurable:e.mutableDefaults,enumerable:!0}),r.mergeOptions=f,r};t.default=g,o(r(77),t)},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const n=r(5),i=r(3),a=r(34),c=r(6),u=r(74),l=r(7),h=r(27),d=r(28),f=r(29),p=["request","response","redirect","uploadProgress","downloadProgress"];t.default=function e(t){let r,s;const o=new n.EventEmitter,m=new a((n,a,y)=>{const b=g=>{const v=new l.default(void 0,t);v.retryCount=g,v._noPipe=!0,y(()=>v.destroy()),y.shouldReject=!1,y(()=>a(new c.CancelError(v))),r=v,v.once("response",async t=>{var r;if(t.retryCount=g,t.request.aborted)return;let o;try{o=await d.default(v),t.rawBody=o}catch(e){return}if(v._isAboutToError)return;const i=(null!==(r=t.headers["content-encoding"])&&void 0!==r?r:"").toLowerCase(),a=["gzip","deflate","br"].includes(i),{options:h}=v;if(a&&!h.decompress)t.body=o;else try{t.body=u.default(t,h.responseType,h.parseJson,h.encoding)}catch(e){if(t.body=o.toString(),f.isResponseOk(t))return void v._beforeError(e)}try{for(const[r,s]of h.hooks.afterResponse.entries())t=await s(t,async t=>{const s=l.default.normalizeArguments(void 0,{...t,retry:{calculateDelay:()=>0},throwHttpErrors:!1,resolveBodyOnly:!1},h);s.hooks.afterResponse=s.hooks.afterResponse.slice(0,r);for(const e of s.hooks.beforeRetry)await e(s);const o=e(s);return y(()=>{o.catch(()=>{}),o.cancel()}),o})}catch(e){return void v._beforeError(new c.RequestError(e.message,e,v))}f.isResponseOk(t)?(s=t,n(v.options.resolveBodyOnly?t.body:t)):v._beforeError(new c.HTTPError(t))});const w=e=>{if(m.isCanceled)return;const{options:t}=v;if(e instanceof c.HTTPError&&!t.throwHttpErrors){const{response:t}=e;n(v.options.resolveBodyOnly?t.body:t)}else a(e)};v.once("error",w);const _=v.options.body;v.once("retry",(e,t)=>{var r,s;_===(null===(r=t.request)||void 0===r?void 0:r.options.body)&&i.default.nodeStream(null===(s=t.request)||void 0===s?void 0:s.options.body)?w(t):b(e)}),h.default(v,o,p)};b(0)});m.on=(e,t)=>(o.on(e,t),m);const y=e=>{const t=(async()=>{await m;const{options:t}=s.request;return u.default(s,e,t.parseJson,t.encoding)})();return Object.defineProperties(t,Object.getOwnPropertyDescriptors(m)),t};return m.json=()=>{const{headers:e}=r.options;return r.writableFinished||void 0!==e.accept||(e.accept="application/json"),y("json")},m.buffer=()=>y("buffer"),m.text=()=>y("text"),m},o(r(6),t)},function(e,t,r){var s=r(45);function o(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function n(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=s(o),e.exports.strict=s(n),o.proto=o((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return o(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return n(this)},configurable:!0})}))},function(e,t,r){"use strict";const s=r(5),o=r(20),n=r(13),i=r(21),a=Symbol("currentStreamsCount"),c=Symbol("request"),u=Symbol("cachedOriginSet"),l=Symbol("gracefullyClosing"),h=["maxDeflateDynamicTableSize","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","localAddress","path","rejectUnauthorized","minDHSize","ca","cert","clientCertEngine","ciphers","key","pfx","servername","minVersion","maxVersion","secureProtocol","crl","honorCipherOrder","ecdhCurve","dhparam","secureOptions","sessionIdContext"],d=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams,f=(e,t)=>{for(const r of e)r[u].length<t[u].length&&r[u].every(e=>t[u].includes(e))&&r[a]+t[a]<=t.remoteSettings.maxConcurrentStreams&&m(r)},p=({agent:e,isFree:t})=>{const r={};for(const s in e.sessions){const o=e.sessions[s].filter(e=>{const r=e[y.kCurrentStreamsCount]<e.remoteSettings.maxConcurrentStreams;return t?r:!r});0!==o.length&&(r[s]=o)}return r},m=e=>{e[l]=!0,0===e[a]&&e.close()};class y extends s{constructor({timeout:e=6e4,maxSessions:t=1/0,maxFreeSessions:r=10,maxCachedTlsSessions:s=100}={}){super(),this.sessions={},this.queue={},this.timeout=e,this.maxSessions=t,this.maxFreeSessions=r,this._freeSessionsCount=0,this._sessionsCount=0,this.settings={enablePush:!1},this.tlsSessionCache=new i({maxSize:s})}static normalizeOrigin(e,t){return"string"==typeof e&&(e=new URL(e)),t&&e.hostname!==t&&(e.hostname=t),e.origin}normalizeOptions(e){let t="";if(e)for(const r of h)e[r]&&(t+=":"+e[r]);return t}_tryToCreateNewSession(e,t){if(!(e in this.queue)||!(t in this.queue[e]))return;const r=this.queue[e][t];this._sessionsCount<this.maxSessions&&!r.completed&&(r.completed=!0,r())}getSession(e,t,r){return new Promise((s,o)=>{Array.isArray(r)?(r=[...r],s()):r=[{resolve:s,reject:o}];const i=this.normalizeOptions(t),h=y.normalizeOrigin(e,t&&t.servername);if(void 0===h){for(const{reject:e}of r)e(new TypeError("The `origin` argument needs to be a string or an URL object"));return}if(i in this.sessions){const e=this.sessions[i];let t,s=-1,o=-1;for(const r of e){const e=r.remoteSettings.maxConcurrentStreams;if(e<s)break;if(r[u].includes(h)){const n=r[a];if(n>=e||r[l]||r.destroyed)continue;t||(s=e),n>o&&(t=r,o=n)}}if(t){if(1!==r.length){for(const{reject:e}of r){e(new Error(`Expected the length of listeners to be 1, got ${r.length}.\nPlease report this to https://github.com/szmarczak/http2-wrapper/`))}return}return void r[0].resolve(t)}}if(i in this.queue){if(h in this.queue[i])return this.queue[i][h].listeners.push(...r),void this._tryToCreateNewSession(i,h)}else this.queue[i]={};const p=()=>{i in this.queue&&this.queue[i][h]===b&&(delete this.queue[i][h],0===Object.keys(this.queue[i]).length&&delete this.queue[i])},b=()=>{const s=`${h}:${i}`;let o=!1;try{const y=n.connect(e,{createConnection:this.createConnection,settings:this.settings,session:this.tlsSessionCache.get(s),...t});y[a]=0,y[l]=!1;const g=()=>y[a]<y.remoteSettings.maxConcurrentStreams;let v=!0;y.socket.once("session",e=>{this.tlsSessionCache.set(s,e)}),y.once("error",e=>{for(const{reject:t}of r)t(e);this.tlsSessionCache.delete(s)}),y.setTimeout(this.timeout,()=>{y.destroy()}),y.once("close",()=>{if(o){v&&this._freeSessionsCount--,this._sessionsCount--;const e=this.sessions[i];e.splice(e.indexOf(y),1),0===e.length&&delete this.sessions[i]}else{const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(const{reject:t}of r)t(e);p()}this._tryToCreateNewSession(i,h)});const w=()=>{if(i in this.queue&&g())for(const e of y[u])if(e in this.queue[i]){const{listeners:t}=this.queue[i][e];for(;0!==t.length&&g();)t.shift().resolve(y);const r=this.queue[i];if(0===r[e].listeners.length&&(delete r[e],0===Object.keys(r).length)){delete this.queue[i];break}if(!g())break}};y.on("origin",()=>{y[u]=y.originSet,g()&&(w(),f(this.sessions[i],y))}),y.once("remoteSettings",()=>{if(y.ref(),y.unref(),this._sessionsCount++,b.destroyed){const e=new Error("Agent has been destroyed");for(const t of r)t.reject(e);y.destroy()}else{y[u]=y.originSet;{const e=this.sessions;if(i in e){const t=e[i];t.splice(((e,t,r)=>{let s=0,o=e.length;for(;s<o;){const n=s+o>>>1;r(e[n],t)?s=n+1:o=n}return s})(t,y,d),0,y)}else e[i]=[y]}this._freeSessionsCount+=1,o=!0,this.emit("session",y),w(),p(),0===y[a]&&this._freeSessionsCount>this.maxFreeSessions&&y.close(),0!==r.length&&(this.getSession(h,t,r),r.length=0),y.on("remoteSettings",()=>{w(),f(this.sessions[i],y)})}}),y[c]=y.request,y.request=(e,t)=>{if(y[l])throw new Error("The session is gracefully closing. No new streams are allowed.");const r=y[c](e,t);return y.ref(),++y[a],y[a]===y.remoteSettings.maxConcurrentStreams&&this._freeSessionsCount--,r.once("close",()=>{if(v=g(),--y[a],!y.destroyed&&!y.closed&&(((e,t)=>{for(const r of e)t[u].length<r[u].length&&t[u].every(e=>r[u].includes(e))&&t[a]+r[a]<=r.remoteSettings.maxConcurrentStreams&&m(t)})(this.sessions[i],y),g()&&!y.closed)){v||(this._freeSessionsCount++,v=!0);const e=0===y[a];e&&y.unref(),e&&(this._freeSessionsCount>this.maxFreeSessions||y[l])?y.close():(f(this.sessions[i],y),w())}}),r}}catch(e){for(const t of r)t.reject(e);p()}};b.listeners=r,b.completed=!1,b.destroyed=!1,this.queue[i][h]=b,this._tryToCreateNewSession(i,h)})}request(e,t,r,s){return new Promise((o,n)=>{this.getSession(e,t,[{reject:n,resolve:e=>{try{o(e.request(r,s))}catch(e){n(e)}}}])})}createConnection(e,t){return y.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const r=e.port||443,s=e.hostname||e.host;return void 0===t.servername&&(t.servername=s),o.connect(r,s,t)}closeFreeSessions(){for(const e of Object.values(this.sessions))for(const t of e)0===t[a]&&t.close()}destroy(e){for(const t of Object.values(this.sessions))for(const r of t)r.destroy(e);for(const e of Object.values(this.queue))for(const t of Object.values(e))t.destroyed=!0;this.queue={}}get freeSessions(){return p({agent:this,isFree:!0})}get busySessions(){return p({agent:this,isFree:!1})}}y.kCurrentStreamsCount=a,y.kGracefullyClosing=l,e.exports={Agent:y,globalAgent:new y}},function(e,t){e.exports=require("tls")},function(e,t,r){"use strict";class s{constructor(e={}){if(!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.onEviction=e.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_set(e,t){if(this.cache.set(e,t),this._size++,this._size>=this.maxSize){if(this._size=0,"function"==typeof this.onEviction)for(const[e,t]of this.oldCache.entries())this.onEviction(e,t);this.oldCache=this.cache,this.cache=new Map}}get(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){const t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}set(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}delete(e){const t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}*keys(){for(const[e]of this)yield e}*values(){for(const[,e]of this)yield e}*[Symbol.iterator](){for(const e of this.cache)yield e;for(const e of this.oldCache){const[t]=e;this.cache.has(t)||(yield e)}}get size(){let e=0;for(const t of this.oldCache.keys())this.cache.has(t)||e++;return Math.min(this._size+e,this.maxSize)}}e.exports=s},function(e,t,r){"use strict";const s=r(13),{Writable:o}=r(0),{Agent:n,globalAgent:i}=r(19),a=r(23),c=r(24),u=r(58),l=r(59),{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:f,ERR_INVALID_HTTP_TOKEN:p,ERR_HTTP_INVALID_HEADER_VALUE:m,ERR_INVALID_CHAR:y}=r(60),{HTTP2_HEADER_STATUS:b,HTTP2_HEADER_METHOD:g,HTTP2_HEADER_PATH:v,HTTP2_METHOD_CONNECT:w}=s.constants,_=Symbol("headers"),E=Symbol("origin"),P=Symbol("session"),S=Symbol("options"),T=Symbol("flushedHeaders"),k=Symbol("jobs"),x=/^[\^`\-\w!#$%&*+.|~]+$/,O=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=class extends o{constructor(e,t,r){super({autoDestroy:!1});const s="string"==typeof e||e instanceof URL;if(s&&(e=c(e instanceof URL?e:new URL(e))),"function"==typeof t||void 0===t?(r=t,t=s?e:{...e}):t={...e,...t},t.h2session)this[P]=t.h2session;else if(!1===t.agent)this.agent=new n({maxFreeSessions:0});else if(void 0===t.agent||null===t.agent)"function"==typeof t.createConnection?(this.agent=new n({maxFreeSessions:0}),this.agent.createConnection=t.createConnection):this.agent=i;else{if("function"!=typeof t.agent.request)throw new h("options.agent",["Agent-like Object","undefined","false"],t.agent);this.agent=t.agent}if(t.protocol&&"https:"!==t.protocol)throw new d(t.protocol,"https:");const o=t.port||t.defaultPort||this.agent&&this.agent.defaultPort||443,a=t.hostname||t.host||"localhost";delete t.hostname,delete t.host,delete t.port;const{timeout:u}=t;if(t.timeout=void 0,this[_]=Object.create(null),this[k]=[],this.socket=null,this.connection=null,this.method=t.method||"GET",this.path=t.path,this.res=null,this.aborted=!1,this.reusedSocket=!1,t.headers)for(const[e,r]of Object.entries(t.headers))this.setHeader(e,r);t.auth&&!("authorization"in this[_])&&(this[_].authorization="Basic "+Buffer.from(t.auth).toString("base64")),t.session=t.tlsSession,t.path=t.socketPath,this[S]=t,443===o?(this[E]="https://"+a,":authority"in this[_]||(this[_][":authority"]=a)):(this[E]=`https://${a}:${o}`,":authority"in this[_]||(this[_][":authority"]=`${a}:${o}`)),u&&this.setTimeout(u),r&&this.once("response",r),this[T]=!1}get method(){return this[_][g]}set method(e){e&&(this[_][g]=e.toUpperCase())}get path(){return this[_][v]}set path(e){e&&(this[_][v]=e)}get _mustNotHaveABody(){return"GET"===this.method||"HEAD"===this.method||"DELETE"===this.method}_write(e,t,r){if(this._mustNotHaveABody)return void r(new Error("The GET, HEAD and DELETE methods must NOT have a body"));this.flushHeaders();const s=()=>this._request.write(e,t,r);this._request?s():this[k].push(s)}_final(e){if(this.destroyed)return;this.flushHeaders();const t=()=>{this._mustNotHaveABody?e():this._request.end(e)};this._request?t():this[k].push(t)}abort(){this.res&&this.res.complete||(this.aborted||process.nextTick(()=>this.emit("abort")),this.aborted=!0,this.destroy())}_destroy(e,t){this.res&&this.res._dump(),this._request&&this._request.destroy(),t(e)}async flushHeaders(){if(this[T]||this.destroyed)return;this[T]=!0;const e=this.method===w,t=t=>{if(this._request=t,this.destroyed)return void t.destroy();e||u(t,this,["timeout","continue","close","error"]);const r=e=>(...t)=>{this.writable||this.destroyed?this.once("finish",()=>{e(...t)}):e(...t)};t.once("response",r((r,s,o)=>{const n=new a(this.socket,t.readableHighWaterMark);this.res=n,n.req=this,n.statusCode=r[b],n.headers=r,n.rawHeaders=o,n.once("end",()=>{this.aborted?(n.aborted=!0,n.emit("aborted")):(n.complete=!0,n.socket=null,n.connection=null)}),e?(n.upgrade=!0,this.emit("connect",n,t,Buffer.alloc(0))?this.emit("close"):t.destroy()):(t.on("data",e=>{n._dumped||n.push(e)||t.pause()}),t.once("end",()=>{n.push(null)}),this.emit("response",n)||n._dump())})),t.once("headers",r(e=>this.emit("information",{statusCode:e[b]}))),t.once("trailers",r((e,t,r)=>{const{res:s}=this;s.trailers=e,s.rawTrailers=r}));const{socket:s}=t.session;this.socket=s,this.connection=s;for(const e of this[k])e();this.emit("socket",this.socket)};if(this[P])try{t(this[P].request(this[_]))}catch(e){this.emit("error",e)}else{this.reusedSocket=!0;try{t(await this.agent.request(this[E],this[S],this[_]))}catch(e){this.emit("error",e)}}}getHeader(e){if("string"!=typeof e)throw new h("name","string",e);return this[_][e.toLowerCase()]}get headersSent(){return this[T]}removeHeader(e){if("string"!=typeof e)throw new h("name","string",e);if(this.headersSent)throw new f("remove");delete this[_][e.toLowerCase()]}setHeader(e,t){if(this.headersSent)throw new f("set");if("string"!=typeof e||!x.test(e)&&!l(e))throw new p("Header name",e);if(void 0===t)throw new m(t,e);if(O.test(t))throw new y("header content",e);this[_][e.toLowerCase()]=t}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const r=()=>this._request.setTimeout(e,t);return this._request?r():this[k].push(r),this}get maxHeadersCount(){if(!this.destroyed&&this._request)return this._request.session.localSettings.maxHeaderListSize}set maxHeadersCount(e){}}},function(e,t,r){"use strict";const{Readable:s}=r(0);e.exports=class extends s{constructor(e,t){super({highWaterMark:t,autoDestroy:!1}),this.statusCode=null,this.statusMessage="",this.httpVersion="2.0",this.httpVersionMajor=2,this.httpVersionMinor=0,this.headers={},this.trailers={},this.req=null,this.aborted=!1,this.complete=!1,this.upgrade=null,this.rawHeaders=[],this.rawTrailers=[],this.socket=e,this.connection=e,this._dumped=!1}_destroy(e){this.req._request.destroy(e)}setTimeout(e,t){return this.req.setTimeout(e,t),this}_dump(){this._dumped||(this._dumped=!0,this.removeAllListeners("data"),this.resume())}_read(){this.req&&this.req._request.resume()}}},function(e,t,r){"use strict";e.exports=e=>{const t={protocol:e.protocol,hostname:"string"==typeof e.hostname&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return"string"==typeof e.port&&0!==e.port.length&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},function(e,t){e.exports=require("net")},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(3);t.default=e=>s.default.nodeStream(e)&&s.default.function_(e.getBoundary)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){const s={};for(const o of r)s[o]=(...e)=>{t.emit(o,...e)},e.on(o,s[o]);return()=>{for(const t of r)e.off(t,s[t])}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=async e=>{const t=[];let r=0;for await(const s of e)t.push(s),r+=Buffer.byteLength(s);return Buffer.isBuffer(t[0])?Buffer.concat(t,r):Buffer.from(t.join(""))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isResponseOk=void 0,t.isResponseOk=e=>{const{statusCode:t}=e,r=e.request.options.followRedirect?299:399;return t>=200&&t<=r||304===t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestTimeoutError=t.HTTPResponseError=t.APIResponseError=t.APIErrorCode=t.LogLevel=t.Client=void 0;var s=r(31);Object.defineProperty(t,"Client",{enumerable:!0,get:function(){return s.default}});var o=r(14);Object.defineProperty(t,"LogLevel",{enumerable:!0,get:function(){return o.LogLevel}});var n=r(15);Object.defineProperty(t,"APIErrorCode",{enumerable:!0,get:function(){return n.APIErrorCode}}),Object.defineProperty(t,"APIResponseError",{enumerable:!0,get:function(){return n.APIResponseError}}),Object.defineProperty(t,"HTTPResponseError",{enumerable:!0,get:function(){return n.HTTPResponseError}}),Object.defineProperty(t,"RequestTimeoutError",{enumerable:!0,get:function(){return n.RequestTimeoutError}})},function(e,t,r){"use strict";var s,o,n,i,a=this&&this.__classPrivateFieldSet||function(e,t,r,s,o){if("m"===s)throw new TypeError("Private method is not writable");if("a"===s&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===s?o.call(e,r):o?o.value=r:t.set(e,r),r},c=this&&this.__classPrivateFieldGet||function(e,t,r,s){if("a"===r&&!s)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?s:"a"===r?s.call(e):s?s.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0});const u=r(1),l=r(14),h=r(15),d=r(9),f=r(32),p=r(33);class m{constructor(e){var t,r,c,u,h;s.set(this,void 0),o.set(this,void 0),n.set(this,void 0),i.set(this,void 0),this.blocks={children:{append:e=>this.request({path:f.blocksChildrenAppend.path(e),method:f.blocksChildrenAppend.method,query:d.pick(e,f.blocksChildrenAppend.queryParams),body:d.pick(e,f.blocksChildrenAppend.bodyParams),auth:null==e?void 0:e.auth}),list:e=>this.request({path:f.blocksChildrenList.path(e),method:f.blocksChildrenList.method,query:d.pick(e,f.blocksChildrenList.queryParams),body:d.pick(e,f.blocksChildrenList.bodyParams),auth:null==e?void 0:e.auth})}},this.databases={list:(e={})=>this.request({path:f.databasesList.path(),method:f.databasesList.method,query:d.pick(e,f.databasesList.queryParams),body:d.pick(e,f.databasesList.bodyParams),auth:null==e?void 0:e.auth}),retrieve:e=>this.request({path:f.databasesRetrieve.path(e),method:f.databasesRetrieve.method,query:d.pick(e,f.databasesRetrieve.queryParams),body:d.pick(e,f.databasesRetrieve.bodyParams),auth:null==e?void 0:e.auth}),query:e=>this.request({path:f.databasesQuery.path(e),method:f.databasesQuery.method,query:d.pick(e,f.databasesQuery.queryParams),body:d.pick(e,f.databasesQuery.bodyParams),auth:null==e?void 0:e.auth})},this.pages={create:e=>this.request({path:f.pagesCreate.path(),method:f.pagesCreate.method,query:d.pick(e,f.pagesCreate.queryParams),body:d.pick(e,f.pagesCreate.bodyParams),auth:null==e?void 0:e.auth}),retrieve:e=>this.request({path:f.pagesRetrieve.path(e),method:f.pagesRetrieve.method,query:d.pick(e,f.pagesRetrieve.queryParams),body:d.pick(e,f.pagesRetrieve.bodyParams),auth:null==e?void 0:e.auth}),update:e=>this.request({path:f.pagesUpdate.path(e),method:f.pagesUpdate.method,query:d.pick(e,f.pagesUpdate.queryParams),body:d.pick(e,f.pagesUpdate.bodyParams),auth:null==e?void 0:e.auth})},this.users={retrieve:e=>this.request({path:f.usersRetrieve.path(e),method:f.usersRetrieve.method,query:d.pick(e,f.usersRetrieve.queryParams),body:d.pick(e,f.usersRetrieve.bodyParams),auth:null==e?void 0:e.auth}),list:(e={})=>this.request({path:f.usersList.path(),method:f.usersList.method,query:d.pick(e,f.usersList.queryParams),body:d.pick(e,f.usersList.bodyParams),auth:null==e?void 0:e.auth})},a(this,s,null==e?void 0:e.auth,"f"),a(this,o,null!==(t=null==e?void 0:e.logLevel)&&void 0!==t?t:l.LogLevel.WARN,"f"),a(this,n,null!==(r=null==e?void 0:e.logger)&&void 0!==r?r:l.makeConsoleLogger(this.constructor.name),"f");const b=(null!==(c=null==e?void 0:e.baseUrl)&&void 0!==c?c:"https://api.notion.com")+"/v1/",g=null!==(u=null==e?void 0:e.timeoutMs)&&void 0!==u?u:6e4,v=null!==(h=null==e?void 0:e.notionVersion)&&void 0!==h?h:m.defaultNotionVersion;a(this,i,p.default.extend({prefixUrl:b,timeout:g,headers:{"Notion-Version":v,"user-agent":"notionhq-client/0.1.0"},retry:0,agent:y(b,null==e?void 0:e.agent)}),"f")}async request({path:e,method:t,query:r,body:s,auth:o}){this.log(l.LogLevel.INFO,"request start",{method:t,path:e});const n=void 0!==s&&0===Object.entries(s).length?void 0:s;try{const s=await c(this,i,"f").call(this,e,{method:t,searchParams:r,json:n,headers:this.authAsHeaders(o)}).json();return this.log(l.LogLevel.INFO,"request success",{method:t,path:e}),s}catch(e){const t=h.buildRequestError(e);if(void 0===t)throw e;throw this.log(l.LogLevel.WARN,"request fail",{code:t.code,message:t.message}),h.HTTPResponseError.isHTTPResponseError(t)&&this.log(l.LogLevel.DEBUG,"failed response body",{body:t.body}),t}}search(e){return this.request({path:f.search.path(),method:f.search.method,query:d.pick(e,f.search.queryParams),body:d.pick(e,f.search.bodyParams),auth:null==e?void 0:e.auth})}log(e,t,r){l.logLevelSeverity(e)>=l.logLevelSeverity(c(this,o,"f"))&&c(this,n,"f").call(this,e,t,r)}authAsHeaders(e){const t={},r=null!=e?e:c(this,s,"f");return void 0!==r&&(t.authorization="Bearer "+r),t}}function y(e,t){if(void 0!==t)return{[b(e)]:t}}function b(e){const t=new u.URL(e);if("https:"===t.protocol)return"https";if("http:"===t.protocol)return"http";throw new TypeError('baseUrl option must begin with "https://" or "http://"')}t.default=m,s=new WeakMap,o=new WeakMap,n=new WeakMap,i=new WeakMap,m.defaultNotionVersion="2021-05-13"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.search=t.usersList=t.usersRetrieve=t.pagesUpdate=t.pagesRetrieve=t.pagesCreate=t.databasesRetrieve=t.databasesQuery=t.databasesList=t.blocksChildrenList=t.blocksChildrenAppend=void 0,t.blocksChildrenAppend={method:"patch",pathParams:["block_id"],queryParams:[],bodyParams:["children"],path:e=>`blocks/${e.block_id}/children`},t.blocksChildrenList={method:"get",pathParams:["block_id"],queryParams:["start_cursor","page_size"],bodyParams:[],path:e=>`blocks/${e.block_id}/children`},t.databasesList={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"databases"},t.databasesQuery={method:"post",pathParams:["database_id"],queryParams:[],bodyParams:["filter","sorts","start_cursor","page_size"],path:e=>`databases/${e.database_id}/query`},t.databasesRetrieve={method:"get",pathParams:["database_id"],queryParams:[],bodyParams:[],path:e=>"databases/"+e.database_id},t.pagesCreate={method:"post",pathParams:[],queryParams:[],bodyParams:["parent","properties","children"],path:()=>"pages"},t.pagesRetrieve={method:"get",pathParams:["page_id"],queryParams:[],bodyParams:[],path:e=>"pages/"+e.page_id},t.pagesUpdate={method:"patch",pathParams:["page_id"],queryParams:[],bodyParams:["properties"],path:e=>"pages/"+e.page_id},t.usersRetrieve={method:"get",pathParams:["user_id"],queryParams:[],bodyParams:[],path:e=>"users/"+e.user_id},t.usersList={method:"get",pathParams:[],queryParams:["start_cursor","page_size"],bodyParams:[],path:()=>"users"},t.search={method:"post",pathParams:[],queryParams:[],bodyParams:["query","sort","filter","start_cursor","page_size"],path:()=>"search"}},function(e,t,r){"use strict";var s=this&&this.__createBinding||(Object.create?function(e,t,r,s){void 0===s&&(s=r),Object.defineProperty(e,s,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,s){void 0===s&&(s=r),e[s]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||s(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0});const n=r(1),i=r(16),a={options:{method:"GET",retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:void 0,calculateDelay:({computedValue:e})=>e},timeout:{},headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},hooks:{init:[],beforeRequest:[],beforeRedirect:[],beforeRetry:[],beforeError:[],afterResponse:[]},cache:void 0,dnsCache:void 0,decompress:!0,throwHttpErrors:!0,followRedirect:!0,isStream:!1,responseType:"text",resolveBodyOnly:!1,maxRedirects:10,prefixUrl:"",methodRewriting:!0,ignoreInvalidCookies:!1,context:{},http2:!1,allowGetBody:!1,https:void 0,pagination:{transform:e=>"json"===e.request.options.responseType?e.body:JSON.parse(e.body),paginate:e=>{if(!Reflect.has(e.headers,"link"))return!1;const t=e.headers.link.split(",");let r;for(const e of t){const t=e.split(";");if(t[1].includes("next")){r=t[0].trimStart().trim(),r=r.slice(1,-1);break}}if(r){return{url:new n.URL(r)}}return!1},filter:()=>!0,shouldContinue:()=>!0,countLimit:1/0,backoff:0,requestLimit:1e4,stackAllItems:!0},parseJson:e=>JSON.parse(e),stringifyJson:e=>JSON.stringify(e),cacheOptions:{}},handlers:[i.defaultHandler],mutableDefaults:!1},c=i.default(a);t.default=c,e.exports=c,e.exports.default=c,e.exports.__esModule=!0,o(r(16),t),o(r(17),t)},function(e,t,r){"use strict";class s extends Error{constructor(e){super(e||"Promise was canceled"),this.name="CancelError"}get isCanceled(){return!0}}class o{static fn(e){return(...t)=>new o((r,s,o)=>{t.push(o),e(...t).then(r,s)})}constructor(e){this._cancelHandlers=[],this._isPending=!0,this._isCanceled=!1,this._rejectOnCancel=!0,this._promise=new Promise((t,r)=>{this._reject=r;const s=e=>{if(!this._isPending)throw new Error("The `onCancel` handler was attached after the promise settled.");this._cancelHandlers.push(e)};return Object.defineProperties(s,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}}),e(e=>{this._isCanceled&&s.shouldReject||(this._isPending=!1,t(e))},e=>{this._isPending=!1,r(e)},s)})}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(this._isPending&&!this._isCanceled){if(this._isCanceled=!0,this._cancelHandlers.length>0)try{for(const e of this._cancelHandlers)e()}catch(e){return void this._reject(e)}this._rejectOnCancel&&this._reject(new s(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(o.prototype,Promise.prototype),e.exports=o,e.exports.CancelError=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(36),o=Number(process.versions.node.split(".")[0]),n=e=>{const t={start:Date.now(),socket:void 0,lookup:void 0,connect:void 0,secureConnect:void 0,upload:void 0,response:void 0,end:void 0,error:void 0,abort:void 0,phases:{wait:void 0,dns:void 0,tcp:void 0,tls:void 0,request:void 0,firstByte:void 0,download:void 0,total:void 0}};e.timings=t;const r=e=>{const r=e.emit.bind(e);e.emit=(s,...o)=>("error"===s&&(t.error=Date.now(),t.phases.total=t.error-t.start,e.emit=r),r(s,...o))};r(e),e.prependOnceListener("abort",()=>{t.abort=Date.now(),(!t.response||o>=13)&&(t.phases.total=Date.now()-t.start)});const n=e=>{t.socket=Date.now(),t.phases.wait=t.socket-t.start;const r=()=>{t.lookup=Date.now(),t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",r),s.default(e,{connect:()=>{t.connect=Date.now(),void 0===t.lookup&&(e.removeListener("lookup",r),t.lookup=t.connect,t.phases.dns=t.lookup-t.socket),t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now(),t.phases.tls=t.secureConnect-t.connect}})};e.socket?n(e.socket):e.prependOnceListener("socket",n);const i=()=>{var e;t.upload=Date.now(),t.phases.request=t.upload-(null!=(e=t.secureConnect)?e:t.connect)};return("boolean"==typeof e.writableFinished?!e.writableFinished:!e.finished||0!==e.outputSize||e.socket&&0!==e.socket.writableLength)?e.prependOnceListener("finish",i):i(),e.prependOnceListener("response",e=>{t.response=Date.now(),t.phases.firstByte=t.response-t.upload,e.timings=t,r(e),e.prependOnceListener("end",()=>{t.end=Date.now(),t.phases.download=t.end-t.response,t.phases.total=t.end-t.start})}),t};t.default=n,e.exports=n,e.exports.default=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=(e,t)=>{let r;if("function"==typeof t){r={connect:t}}else r=t;const s="function"==typeof r.connect,o="function"==typeof r.secureConnect,n="function"==typeof r.close,i=()=>{s&&r.connect(),function(e){return e.encrypted}(e)&&o&&(e.authorized?r.secureConnect():e.authorizationError||e.once("secureConnect",r.secureConnect)),n&&e.once("close",r.close)};e.writable&&!e.connecting?i():e.connecting?e.once("connect",i):e.destroyed&&n&&r.close(e._hadError)};t.default=s,e.exports=s,e.exports.default=s},function(e,t,r){"use strict";const{V4MAPPED:s,ADDRCONFIG:o,ALL:n,promises:{Resolver:i},lookup:a}=r(38),{promisify:c}=r(10),u=r(39),l=Symbol("cacheableLookupCreateConnection"),h=Symbol("cacheableLookupInstance"),d=Symbol("expires"),f="number"==typeof n,p=e=>{if(!e||"function"!=typeof e.createConnection)throw new Error("Expected an Agent instance as the first argument")},m=()=>{let e=!1,t=!1;for(const r of Object.values(u.networkInterfaces()))for(const s of r)if(!s.internal&&("IPv6"===s.family?t=!0:e=!0,e&&t))return{has4:e,has6:t};return{has4:e,has6:t}},y={ttl:!0},b={all:!0};class g{constructor({cache:e=new Map,maxTtl:t=1/0,fallbackDuration:r=3600,errorTtl:s=.15,resolver:o=new i,lookup:n=a}={}){if(this.maxTtl=t,this.errorTtl=s,this._cache=e,this._resolver=o,this._dnsLookup=c(n),this._resolver instanceof i?(this._resolve4=this._resolver.resolve4.bind(this._resolver),this._resolve6=this._resolver.resolve6.bind(this._resolver)):(this._resolve4=c(this._resolver.resolve4.bind(this._resolver)),this._resolve6=c(this._resolver.resolve6.bind(this._resolver))),this._iface=m(),this._pending={},this._nextRemovalTime=!1,this._hostnamesToFallback=new Set,r<1)this._fallback=!1;else{this._fallback=!0;const e=setInterval(()=>{this._hostnamesToFallback.clear()},1e3*r);e.unref&&e.unref()}this.lookup=this.lookup.bind(this),this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear(),this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,r){if("function"==typeof t?(r=t,t={}):"number"==typeof t&&(t={family:t}),!r)throw new Error("Callback must be a function.");this.lookupAsync(e,t).then(e=>{t.all?r(null,e):r(null,e.address,e.family,e.expires,e.ttl)},r)}async lookupAsync(e,t={}){"number"==typeof t&&(t={family:t});let r=await this.query(e);if(6===t.family){const e=r.filter(e=>6===e.family);t.hints&s&&(f&&t.hints&n||0===e.length)?(e=>{for(const t of e)6!==t.family&&(t.address="::ffff:"+t.address,t.family=6)})(r):r=e}else 4===t.family&&(r=r.filter(e=>4===e.family));if(t.hints&o){const{_iface:e}=this;r=r.filter(t=>6===t.family?e.has6:e.has4)}if(0===r.length){const t=new Error("cacheableLookup ENOTFOUND "+e);throw t.code="ENOTFOUND",t.hostname=e,t}return t.all?r:r[0]}async query(e){let t=await this._cache.get(e);if(!t){const r=this._pending[e];if(r)t=await r;else{const r=this.queryAndCache(e);this._pending[e]=r;try{t=await r}finally{delete this._pending[e]}}}return t=t.map(e=>({...e})),t}async _resolve(e){const[t,r]=await Promise.all([this._resolve4(e,y),this._resolve6(e,y)].map(e=>(async e=>{try{return await e}catch(e){if("ENODATA"===e.code||"ENOTFOUND"===e.code)return[];throw e}})(e)));let s=0,o=0,n=0;const i=Date.now();for(const e of t)e.family=4,e.expires=i+1e3*e.ttl,s=Math.max(s,e.ttl);for(const e of r)e.family=6,e.expires=i+1e3*e.ttl,o=Math.max(o,e.ttl);return n=t.length>0?r.length>0?Math.min(s,o):s:o,{entries:[...t,...r],cacheTtl:n}}async _lookup(e){try{return{entries:await this._dnsLookup(e,{all:!0}),cacheTtl:0}}catch(e){return{entries:[],cacheTtl:0}}}async _set(e,t,r){if(this.maxTtl>0&&r>0){r=1e3*Math.min(r,this.maxTtl),t[d]=Date.now()+r;try{await this._cache.set(e,t,r)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");throw t.cause=e,t}}s=this._cache,Symbol.iterator in s&&this._tick(r)}var s}async queryAndCache(e){if(this._hostnamesToFallback.has(e))return this._dnsLookup(e,b);let t=await this._resolve(e);0===t.entries.length&&this._fallback&&(t=await this._lookup(e),0!==t.entries.length&&this._hostnamesToFallback.add(e));const r=0===t.entries.length?this.errorTtl:t.cacheTtl;return await this._set(e,t.entries,r),t.entries}_tick(e){const t=this._nextRemovalTime;(!t||e<t)&&(clearTimeout(this._removalTimeout),this._nextRemovalTime=e,this._removalTimeout=setTimeout(()=>{this._nextRemovalTime=!1;let e=1/0;const t=Date.now();for(const[r,s]of this._cache){const o=s[d];t>=o?this._cache.delete(r):o<e&&(e=o)}e!==1/0&&this._tick(e-t)},e),this._removalTimeout.unref&&this._removalTimeout.unref())}install(e){if(p(e),l in e)throw new Error("CacheableLookup has been already installed");e[l]=e.createConnection,e[h]=this,e.createConnection=(t,r)=>("lookup"in t||(t.lookup=this.lookup),e[l](t,r))}uninstall(e){if(p(e),e[l]){if(e[h]!==this)throw new Error("The agent is not owned by this CacheableLookup instance");e.createConnection=e[l],delete e[l],delete e[h]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=m(),(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6)&&this._cache.clear()}clear(e){e?this._cache.delete(e):this._cache.clear()}}e.exports=g,e.exports.default=g},function(e,t){e.exports=require("dns")},function(e,t){e.exports=require("os")},function(e,t,r){"use strict";const s=r(5),o=r(1),n=r(41),i=r(42),a=r(48),c=r(49),u=r(12),l=r(50),h=r(52);class d{constructor(e,t){if("function"!=typeof e)throw new TypeError("Parameter `request` must be a function");return this.cache=new h({uri:"string"==typeof t&&t,store:"string"!=typeof t&&t,namespace:"cacheable-request"}),this.createCacheableRequest(e)}createCacheableRequest(e){return(t,r)=>{let h;if("string"==typeof t)h=p(o.parse(t)),t={};else if(t instanceof o.URL)h=p(o.parse(t.toString())),t={};else{const[e,...r]=(t.path||"").split("?"),s=r.length>0?"?"+r.join("?"):"";h=p({...t,pathname:e,search:s})}(t={headers:{},method:"GET",cache:!0,strictTtl:!1,automaticFailover:!1,...t,...f(h)}).headers=u(t.headers);const m=new s,y=n(o.format(h),{stripWWW:!1,removeTrailingSlash:!1,stripAuthentication:!1}),b=`${t.method}:${y}`;let g=!1,v=!1;const w=t=>{v=!0;let s,o=!1;const n=new Promise(e=>{s=()=>{o||(o=!0,e())}}),u=e=>{if(g&&!t.forceRefresh){e.status=e.statusCode;const r=a.fromObject(g.cachePolicy).revalidatedPolicy(t,e);if(!r.modified){const t=r.policy.responseHeaders();(e=new c(g.statusCode,t,g.body,g.url)).cachePolicy=r.policy,e.fromCache=!0}}let s;e.fromCache||(e.cachePolicy=new a(t,e,t),e.fromCache=!1),t.cache&&e.cachePolicy.storable()?(s=l(e),(async()=>{try{const r=i.buffer(e);if(await Promise.race([n,new Promise(t=>e.once("end",t))]),o)return;const s=await r,a={cachePolicy:e.cachePolicy.toObject(),url:e.url,statusCode:e.fromCache?g.statusCode:e.statusCode,body:s};let c=t.strictTtl?e.cachePolicy.timeToLive():void 0;t.maxTtl&&(c=c?Math.min(c,t.maxTtl):t.maxTtl),await this.cache.set(b,a,c)}catch(e){m.emit("error",new d.CacheError(e))}})()):t.cache&&g&&(async()=>{try{await this.cache.delete(b)}catch(e){m.emit("error",new d.CacheError(e))}})(),m.emit("response",s||e),"function"==typeof r&&r(s||e)};try{const r=e(t,u);r.once("error",s),r.once("abort",s),m.emit("request",r)}catch(e){m.emit("error",new d.RequestError(e))}};return(async()=>{const e=async e=>{await Promise.resolve();const t=e.cache?await this.cache.get(b):void 0;if(void 0===t)return w(e);const s=a.fromObject(t.cachePolicy);if(s.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=s.responseHeaders(),o=new c(t.statusCode,e,t.body,t.url);o.cachePolicy=s,o.fromCache=!0,m.emit("response",o),"function"==typeof r&&r(o)}else g=t,e.headers=s.revalidationHeaders(e),w(e)},s=e=>m.emit("error",new d.CacheError(e));this.cache.once("error",s),m.on("response",()=>this.cache.removeListener("error",s));try{await e(t)}catch(e){t.automaticFailover&&!v&&w(t),m.emit("error",new d.CacheError(e))}})(),m}}}function f(e){const t={...e};return t.path=`${e.pathname||"/"}${e.search||""}`,delete t.pathname,delete t.search,t}function p(e){return{protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search}}d.RequestError=class extends Error{constructor(e){super(e.message),this.name="RequestError",Object.assign(this,e)}},d.CacheError=class extends Error{constructor(e){super(e.message),this.name="CacheError",Object.assign(this,e)}},e.exports=d},function(e,t,r){"use strict";const s=(e,t)=>t.some(t=>t instanceof RegExp?t.test(e):t===e);e.exports=(e,t)=>{if(t={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...t},e=e.trim(),/^data:/i.test(e))return((e,{stripHash:t})=>{const r=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!r)throw new Error("Invalid URL: "+e);let{type:s,data:o,hash:n}=r.groups;const i=s.split(";");n=t?"":n;let a=!1;"base64"===i[i.length-1]&&(i.pop(),a=!0);const c=(i.shift()||"").toLowerCase(),u=[...i.map(e=>{let[t,r=""]=e.split("=").map(e=>e.trim());return"charset"===t&&(r=r.toLowerCase(),"us-ascii"===r)?"":`${t}${r?"="+r:""}`}).filter(Boolean)];return a&&u.push("base64"),(0!==u.length||c&&"text/plain"!==c)&&u.unshift(c),`data:${u.join(";")},${a?o.trim():o}${n?"#"+n:""}`})(e,t);if(/^view-source:/i.test(e))throw new Error("`view-source:` is not supported as it is a non-standard protocol");const r=e.startsWith("//");!r&&/^\.*\//.test(e)||(e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol));const o=new URL(e);if(t.forceHttp&&t.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(t.forceHttp&&"https:"===o.protocol&&(o.protocol="http:"),t.forceHttps&&"http:"===o.protocol&&(o.protocol="https:"),t.stripAuthentication&&(o.username="",o.password=""),t.stripHash?o.hash="":t.stripTextFragment&&(o.hash=o.hash.replace(/#?:~:text.*?$/i,"")),o.pathname&&(o.pathname=o.pathname.replace(/(?<!\b(?:[a-z][a-z\d+\-.]{1,50}:))\/{2,}/g,"/")),o.pathname)try{o.pathname=decodeURI(o.pathname)}catch(e){}if(!0===t.removeDirectoryIndex&&(t.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=o.pathname.split("/");const r=e[e.length-1];s(r,t.removeDirectoryIndex)&&(e=e.slice(0,e.length-1),o.pathname=e.slice(1).join("/")+"/")}if(o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),t.stripWWW&&/^www\.(?!www\.)(?:[a-z\-\d]{1,63})\.(?:[a-z.\-\d]{2,63})$/.test(o.hostname)&&(o.hostname=o.hostname.replace(/^www\./,""))),Array.isArray(t.removeQueryParameters))for(const e of[...o.searchParams.keys()])s(e,t.removeQueryParameters)&&o.searchParams.delete(e);t.sortQueryParameters&&o.searchParams.sort(),t.removeTrailingSlash&&(o.pathname=o.pathname.replace(/\/$/,""));const n=e;return e=o.toString(),t.removeSingleSlash||"/"!==o.pathname||n.endsWith("/")||""!==o.hash||(e=e.replace(/\/$/,"")),(t.removeTrailingSlash||"/"===o.pathname)&&""===o.hash&&t.removeSingleSlash&&(e=e.replace(/\/$/,"")),r&&!t.normalizeProtocol&&(e=e.replace(/^http:\/\//,"//")),t.stripProtocol&&(e=e.replace(/^(?:https?:)?\/\//,"")),e}},function(e,t,r){"use strict";const{constants:s}=r(43),o=r(44),n=r(47);class i extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function a(e,t){if(!e)return Promise.reject(new Error("Expected a stream"));t={maxBuffer:1/0,...t};const{maxBuffer:r}=t;let a;return await new Promise((c,u)=>{const l=e=>{e&&a.getBufferedLength()<=s.MAX_LENGTH&&(e.bufferedData=a.getBufferedValue()),u(e)};a=o(e,n(t),e=>{e?l(e):c()}),a.on("data",()=>{a.getBufferedLength()>r&&l(new i)})}),a.getBufferedValue()}e.exports=a,e.exports.default=a,e.exports.buffer=(e,t)=>a(e,{...t,encoding:"buffer"}),e.exports.array=(e,t)=>a(e,{...t,array:!0}),e.exports.MaxBufferError=i},function(e,t){e.exports=require("buffer")},function(e,t,r){var s=r(18),o=r(46),n=r(11),i=function(){},a=/^v?\.0/.test(process.version),c=function(e){return"function"==typeof e},u=function(e,t,r,u){u=s(u);var l=!1;e.on("close",(function(){l=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return u(e);l=!0,u()}));var h=!1;return function(t){if(!l&&!h)return h=!0,function(e){return!!a&&(!!n&&((e instanceof(n.ReadStream||i)||e instanceof(n.WriteStream||i))&&c(e.close)))}(e)?e.close(i):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void u(t||new Error("stream was destroyed"))}},l=function(e){e()},h=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||i)&&t.pop()||i;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var s=t.map((function(o,n){var i=n<t.length-1;return u(o,i,n>0,(function(t){e||(e=t),t&&s.forEach(l),i||(s.forEach(l),r(e))}))}));return t.reduce(h)}},function(e,t){e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){s[e]=t[e]})),s;function s(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var s=t.apply(this,e),o=e[e.length-1];return"function"==typeof s&&s!==o&&Object.keys(o).forEach((function(e){s[e]=o[e]})),s}}},function(e,t,r){var s=r(18),o=function(){},n=function(e,t,r){if("function"==typeof t)return n(e,null,t);t||(t={}),r=s(r||o);var i=e._writableState,a=e._readableState,c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,l=!1,h=function(){e.writable||d()},d=function(){u=!1,c||r.call(e)},f=function(){c=!1,u||r.call(e)},p=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},m=function(t){r.call(e,t)},y=function(){process.nextTick(b)},b=function(){if(!l)return(!c||a&&a.ended&&!a.destroyed)&&(!u||i&&i.ended&&!i.destroyed)?void 0:r.call(e,new Error("premature close"))},g=function(){e.req.on("finish",d)};return!function(e){return e.setHeader&&"function"==typeof e.abort}(e)?u&&!i&&(e.on("end",h),e.on("close",h)):(e.on("complete",d),e.on("abort",y),e.req?g():e.on("request",g)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",p),e.on("end",f),e.on("finish",d),!1!==t.error&&e.on("error",m),e.on("close",y),function(){l=!0,e.removeListener("complete",d),e.removeListener("abort",y),e.removeListener("request",g),e.req&&e.req.removeListener("finish",d),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",d),e.removeListener("exit",p),e.removeListener("end",f),e.removeListener("error",m),e.removeListener("close",y)}};e.exports=n},function(e,t,r){"use strict";const{PassThrough:s}=r(0);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:r}=e;const o="buffer"===r;let n=!1;t?n=!(r||o):r=r||"utf8",o&&(r=null);const i=new s({objectMode:n});r&&i.setEncoding(r);let a=0;const c=[];return i.on("data",e=>{c.push(e),n?a=c.length:a+=e.length}),i.getBufferedValue=()=>t?c:o?Buffer.concat(c,a):c.join(""),i.getBufferedLength=()=>a,i}},function(e,t,r){"use strict";const s=new Set([200,203,204,206,300,301,404,405,410,414,501]),o=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),n=new Set([500,502,503,504]),i={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},a={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function c(e){const t=parseInt(e,10);return isFinite(t)?t:0}function u(e){const t={};if(!e)return t;const r=e.trim().split(/\s*,\s*/);for(const e of r){const[r,s]=e.split(/\s*=\s*/,2);t[r]=void 0===s||s.replace(/^"|"$/g,"")}return t}function l(e){let t=[];for(const r in e){const s=e[r];t.push(!0===s?r:r+"="+s)}if(t.length)return t.join(", ")}e.exports=class{constructor(e,t,{shared:r,cacheHeuristic:s,immutableMinTimeToLive:o,ignoreCargoCult:n,_fromObject:i}={}){if(i)this._fromObject(i);else{if(!t||!t.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=!1!==r,this._cacheHeuristic=void 0!==s?s:.1,this._immutableMinTtl=void 0!==o?o:864e5,this._status="status"in t?t.status:200,this._resHeaders=t.headers,this._rescc=u(t.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=t.headers.vary?e.headers:null,this._reqcc=u(e.headers["cache-control"]),n&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":l(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),null==t.headers["cache-control"]&&/no-cache/.test(t.headers.pragma)&&(this._rescc["no-cache"]=!0)}}now(){return Date.now()}storable(){return!(this._reqcc["no-store"]||!("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())||!o.has(this._status)||this._rescc["no-store"]||this._isShared&&this._rescc.private||this._isShared&&!this._noAuthorization&&!this._allowsStoringAuthenticated()||!(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||s.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=u(e.headers["cache-control"]);if(t["no-cache"]||/no-cache/.test(e.headers.pragma))return!1;if(t["max-age"]&&this.age()>t["max-age"])return!1;if(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"])return!1;if(this.stale()){if(!(t["max-stale"]&&!this._rescc["must-revalidate"]&&(!0===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge())))return!1}return this._requestMatches(e,!1)}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if("*"===this._resHeaders.vary)return!1;const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const r of t)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){const t={};for(const r in e)i[r]||(t[r]=e[r]);if(e.connection){const r=e.connection.trim().split(/\s*,\s*/);for(const e of r)delete t[e]}if(t.warning){const e=t.warning.split(/,/).filter(e=>!/^\s*1[0-9][0-9]/.test(e));e.length?t.warning=e.join(",").trim():delete t.warning}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders),t=this.age();return t>86400&&!this._hasExplicitExpiration()&&this.maxAge()>86400&&(e.warning=(e.warning?e.warning+", ":"")+'113 - "rfc7234 5.5.4"'),e.age=""+Math.round(t),e.date=new Date(this.now()).toUTCString(),e}date(){const e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){return this._ageValue()+(this.now()-this._responseTime)/1e3}_ageValue(){return c(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"])return 0;if(this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)return 0;if("*"===this._resHeaders.vary)return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return c(this._rescc["s-maxage"])}if(this._rescc["max-age"])return c(this._rescc["max-age"]);const e=this._rescc.immutable?this._immutableMinTtl:0,t=this.date();if(this._resHeaders.expires){const r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<t?0:Math.max(e,(r-t)/1e3)}if(this._resHeaders["last-modified"]){const r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&t>r)return Math.max(e,(t-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){const e=this.maxAge()-this.age(),t=e+c(this._rescc["stale-if-error"]),r=e+c(this._rescc["stale-while-revalidate"]);return 1e3*Math.max(0,e,t,r)}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+c(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+c(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||1!==e.v)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=void 0!==e.imm?e.imm:864e5,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);if(delete t["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete t["if-none-match"],delete t["if-modified-since"],t;this._resHeaders.etag&&(t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag);if(t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&"GET"!=this._method){if(delete t["if-modified-since"],t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter(e=>!/^\s*W\//.test(e));e.length?t["if-none-match"]=e.join(",").trim():delete t["if-none-match"]}}else this._resHeaders["last-modified"]&&!t["if-modified-since"]&&(t["if-modified-since"]=this._resHeaders["last-modified"]);return t}revalidatedPolicy(e,t){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&function(e){return!e||n.has(e.status)}(t))return{modified:!1,matches:!1,policy:this};if(!t||!t.headers)throw Error("Response headers missing");let r=!1;if(void 0!==t.status&&304!=t.status?r=!1:t.headers.etag&&!/^\s*W\//.test(t.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag:this._resHeaders.etag&&t.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===t.headers["last-modified"]:this._resHeaders.etag||this._resHeaders["last-modified"]||t.headers.etag||t.headers["last-modified"]||(r=!0),!r)return{policy:new this.constructor(e,t),modified:304!=t.status,matches:!1};const s={};for(const e in this._resHeaders)s[e]=e in t.headers&&!a[e]?t.headers[e]:this._resHeaders[e];const o=Object.assign({},t,{status:this._status,method:this._method,headers:s});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}},function(e,t,r){"use strict";const s=r(0).Readable,o=r(12);e.exports=class extends s{constructor(e,t,r,s){if("number"!=typeof e)throw new TypeError("Argument `statusCode` should be a number");if("object"!=typeof t)throw new TypeError("Argument `headers` should be an object");if(!(r instanceof Buffer))throw new TypeError("Argument `body` should be a buffer");if("string"!=typeof s)throw new TypeError("Argument `url` should be a string");super(),this.statusCode=e,this.headers=o(t),this.body=r,this.url=s}_read(){this.push(this.body),this.push(null)}}},function(e,t,r){"use strict";const s=r(0).PassThrough,o=r(51);e.exports=e=>{if(!e||!e.pipe)throw new TypeError("Parameter `response` must be a response stream.");const t=new s;return o(e,t),e.pipe(t)}},function(e,t,r){"use strict";const s=["destroy","setTimeout","socket","headers","trailers","rawHeaders","statusCode","httpVersion","httpVersionMinor","httpVersionMajor","rawTrailers","statusMessage"];e.exports=(e,t)=>{const r=new Set(Object.keys(e).concat(s));for(const s of r)s in t||(t[s]="function"==typeof e[s]?e[s].bind(e):e[s])}},function(e,t,r){"use strict";const s=r(5),o=r(53);e.exports=class extends s{constructor(e,t){if(super(),this.opts=Object.assign({namespace:"keyv",serialize:o.stringify,deserialize:o.parse},"string"==typeof e?{uri:e}:e,t),!this.opts.store){const e=Object.assign({},this.opts);this.opts.store=(e=>{const t={redis:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql"};if(e.adapter||e.uri){const s=e.adapter||/^[^:]*/.exec(e.uri)[0];return new(r(54)(t[s]))(e)}return new Map})(e)}"function"==typeof this.opts.store.on&&this.opts.store.on("error",e=>this.emit("error",e)),this.opts.store.namespace=this.opts.namespace}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}get(e,t){const r=this._getKeyPrefix(e),{store:s}=this.opts;return Promise.resolve().then(()=>s.get(r)).then(e=>"string"==typeof e?this.opts.deserialize(e):e).then(r=>{if(void 0!==r){if(!("number"==typeof r.expires&&Date.now()>r.expires))return t&&t.raw?r:r.value;this.delete(e)}})}set(e,t,r){const s=this._getKeyPrefix(e);void 0===r&&(r=this.opts.ttl),0===r&&(r=void 0);const{store:o}=this.opts;return Promise.resolve().then(()=>{const e="number"==typeof r?Date.now()+r:null;return t={value:t,expires:e},this.opts.serialize(t)}).then(e=>o.set(s,e,r)).then(()=>!0)}delete(e){const t=this._getKeyPrefix(e),{store:r}=this.opts;return Promise.resolve().then(()=>r.delete(t))}clear(){const{store:e}=this.opts;return Promise.resolve().then(()=>e.clear())}}},function(e,t){t.stringify=function e(t){if(void 0===t)return t;if(t&&Buffer.isBuffer(t))return JSON.stringify(":base64:"+t.toString("base64"));if(t&&t.toJSON&&(t=t.toJSON()),t&&"object"==typeof t){var r="",s=Array.isArray(t);r=s?"[":"{";var o=!0;for(var n in t){var i="function"==typeof t[n]||!s&&void 0===t[n];Object.hasOwnProperty.call(t,n)&&!i&&(o||(r+=","),o=!1,s?null==t[n]?r+="null":r+=e(t[n]):void 0!==t[n]&&(r+=e(n)+":"+e(t[n])))}return r+=s?"]":"}"}return"string"==typeof t?JSON.stringify(/^:/.test(t)?":"+t:t):void 0===t?"null":JSON.stringify(t)},t.parse=function(e){return JSON.parse(e,(function(e,t){return"string"==typeof t?/^:base64:/.test(t)?Buffer.from(t.substring(8),"base64"):/^:/.test(t)?t.substring(1):t:t}))}},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=54},function(e,t,r){"use strict";const{Transform:s,PassThrough:o}=r(0),n=r(2),i=r(56);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t))return e;const r="br"===t;if(r&&"function"!=typeof n.createBrotliDecompress)return e.destroy(new Error("Brotli is not supported on Node.js < 12")),e;let a=!0;const c=new s({transform(e,t,r){a=!1,r(null,e)},flush(e){e()}}),u=new o({autoDestroy:!1,destroy(t,r){e.destroy(),r(t)}}),l=r?n.createBrotliDecompress():n.createUnzip();return l.once("error",t=>{!a||e.readable?u.destroy(t):u.end()}),i(e,u),e.pipe(c).pipe(l).pipe(u),u}},function(e,t,r){"use strict";const s=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,t)=>{if(t._readableState.autoDestroy)throw new Error("The second stream must have the `autoDestroy` option set to `false`");const r=new Set(Object.keys(e).concat(s)),o={};for(const s of r)s in t||(o[s]={get(){const t=e[s];return"function"==typeof t?t.bind(e):t},set(t){e[s]=t},enumerable:!0,configurable:!1});return Object.defineProperties(t,o),e.once("aborted",()=>{t.destroy(),t.emit("aborted")}),e.once("close",()=>{e.complete&&t.readable?t.once("end",()=>{t.emit("close")}):t.emit("close")}),t}},function(e,t,r){"use strict";const s=r(13),o=r(19),n=r(22),i=r(23),a=r(61);e.exports={...s,ClientRequest:n,IncomingMessage:i,...o,request:(e,t,r)=>new n(e,t,r),get:(e,t,r)=>{const s=new n(e,t,r);return s.end(),s},auto:a}},function(e,t,r){"use strict";e.exports=(e,t,r)=>{for(const s of r)e.on(s,(...e)=>t.emit(s,...e))}},function(e,t,r){"use strict";e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return!0;default:return!1}}},function(e,t,r){"use strict";const s=(t,r,s)=>{e.exports[r]=class extends t{constructor(...e){super("string"==typeof s?s:s(e)),this.name=`${super.name} [${r}]`,this.code=r}}};s(TypeError,"ERR_INVALID_ARG_TYPE",e=>{const t=e[0].includes(".")?"property":"argument";let r=e[1];const s=Array.isArray(r);return s&&(r=`${r.slice(0,-1).join(", ")} or ${r.slice(-1)}`),`The "${e[0]}" ${t} must be ${s?"one of":"of"} type ${r}. Received ${typeof e[2]}`}),s(TypeError,"ERR_INVALID_PROTOCOL",e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`),s(Error,"ERR_HTTP_HEADERS_SENT",e=>`Cannot ${e[0]} headers after they are sent to the client`),s(TypeError,"ERR_INVALID_HTTP_TOKEN",e=>`${e[0]} must be a valid HTTP token [${e[1]}]`),s(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",e=>`Invalid value "${e[0]} for header "${e[1]}"`),s(TypeError,"ERR_INVALID_CHAR",e=>`Invalid character in ${e[0]} [${e[1]}]`)},function(e,t,r){"use strict";const s=r(4),o=r(8),n=r(62),i=r(21),a=r(22),c=r(63),u=r(24),l=new i({maxSize:100}),h=new Map,d=(e,t,r)=>{t._httpMessage={shouldKeepAlive:!0};const s=()=>{e.emit("free",t,r)};t.on("free",s);const o=()=>{e.removeSocket(t,r)};t.on("close",o);const n=()=>{e.removeSocket(t,r),t.off("close",o),t.off("free",s),t.off("agentRemove",n)};t.on("agentRemove",n),e.emit("free",t,r)};e.exports=async(e,t,r)=>{if(("string"==typeof e||e instanceof URL)&&(e=u(new URL(e))),"function"==typeof t&&(r=t,t=void 0),t={ALPNProtocols:["h2","http/1.1"],...e,...t,resolveSocket:!0},!Array.isArray(t.ALPNProtocols)||0===t.ALPNProtocols.length)throw new Error("The `ALPNProtocols` option must be an Array with at least one entry");t.protocol=t.protocol||"https:";const i="https:"===t.protocol;t.host=t.hostname||t.host||"localhost",t.session=t.tlsSession,t.servername=t.servername||c(t),t.port=t.port||(i?443:80),t._defaultAgent=i?o.globalAgent:s.globalAgent;const f=t.agent;if(f){if(f.addRequest)throw new Error("The `options.agent` object can contain only `http`, `https` or `http2` properties");t.agent=f[i?"https":"http"]}if(i){if("h2"===await(async e=>{const t=`${e.host}:${e.port}:${e.ALPNProtocols.sort()}`;if(!l.has(t)){if(h.has(t)){return(await h.get(t)).alpnProtocol}const{path:r,agent:s}=e;e.path=e.socketPath;const i=n(e);h.set(t,i);try{const{socket:n,alpnProtocol:a}=await i;if(l.set(t,a),e.path=r,"h2"===a)n.destroy();else{const{globalAgent:t}=o,r=o.Agent.prototype.createConnection;s?s.createConnection===r?d(s,n,e):n.destroy():t.createConnection===r?d(t,n,e):n.destroy()}return h.delete(t),a}catch(e){throw h.delete(t),e}}return l.get(t)})(t))return f&&(t.agent=f.http2),new a(t,r)}return s.request(t,r)},e.exports.protocolCache=l},function(e,t,r){"use strict";const s=r(20);e.exports=(e={})=>new Promise((t,r)=>{let o=!1;const n=async()=>{a.off("timeout",i),a.off("error",r),e.resolveSocket?(t({alpnProtocol:a.alpnProtocol,socket:a,timeout:o}),o&&(await Promise.resolve(),a.emit("timeout"))):(a.destroy(),t({alpnProtocol:a.alpnProtocol,timeout:o}))},i=async()=>{o=!0,n()},a=s.connect(e,n);a.on("error",r),a.once("timeout",i)})},function(e,t,r){"use strict";const s=r(25);e.exports=e=>{let t=e.host;const r=e.headers&&e.headers.host;if(r)if(r.startsWith("[")){t=-1===r.indexOf("]")?r:r.slice(1,-1)}else t=r.split(":",1)[0];return s.isIP(t)?"":t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(11),o=r(10),n=r(3),i=r(26),a=o.promisify(s.stat);t.default=async(e,t)=>{if(t&&"content-length"in t)return Number(t["content-length"]);if(!e)return 0;if(n.default.string(e))return Buffer.byteLength(e);if(n.default.buffer(e))return e.length;if(i.default(e))return o.promisify(e.getLength.bind(e))();if(e instanceof s.ReadStream){const{size:t}=await a(e.path);if(0===t)return;return t}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimeoutError=void 0;const s=r(25),o=r(66),n=Symbol("reentry"),i=()=>{};class a extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`),this.event=t,this.name="TimeoutError",this.code="ETIMEDOUT"}}t.TimeoutError=a,t.default=(e,t,r)=>{if(n in e)return i;e[n]=!0;const c=[],{once:u,unhandleAll:l}=o.default(),h=(e,t,r)=>{var s;const o=setTimeout(t,e,e,r);null===(s=o.unref)||void 0===s||s.call(o);const n=()=>{clearTimeout(o)};return c.push(n),n},{host:d,hostname:f}=r,p=(t,r)=>{e.destroy(new a(t,r))},m=()=>{for(const e of c)e();l()};if(e.once("error",t=>{if(m(),0===e.listenerCount("error"))throw t}),e.once("close",m),u(e,"response",e=>{u(e,"end",m)}),void 0!==t.request&&h(t.request,p,"request"),void 0!==t.socket){const r=()=>{p(t.socket,"socket")};e.setTimeout(t.socket,r),c.push(()=>{e.removeListener("timeout",r)})}return u(e,"socket",o=>{var n;const{socketPath:i}=e;if(o.connecting){const e=Boolean(null!=i?i:0!==s.isIP(null!==(n=null!=f?f:d)&&void 0!==n?n:""));if(void 0!==t.lookup&&!e&&void 0===o.address().address){const e=h(t.lookup,p,"lookup");u(o,"lookup",e)}if(void 0!==t.connect){const r=()=>h(t.connect,p,"connect");e?u(o,"connect",r()):u(o,"lookup",e=>{null===e&&u(o,"connect",r())})}void 0!==t.secureConnect&&"https:"===r.protocol&&u(o,"connect",()=>{const e=h(t.secureConnect,p,"secureConnect");u(o,"secureConnect",e)})}if(void 0!==t.send){const r=()=>h(t.send,p,"send");o.connecting?u(o,"connect",()=>{u(e,"upload-complete",r())}):u(e,"upload-complete",r())}}),void 0!==t.response&&u(e,"upload-complete",()=>{const r=h(t.response,p,"response");u(e,"response",r)}),m}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=()=>{const e=[];return{once(t,r,s){t.once(r,s),e.push({origin:t,event:r,fn:s})},unhandleAll(){for(const t of e){const{origin:e,event:r,fn:s}=t;e.removeListener(r,s)}e.length=0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(3);t.default=e=>{const t={protocol:(e=e).protocol,hostname:s.default.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};return s.default.string(e.port)&&e.port.length>0&&(t.port=Number(e.port)),(e.username||e.password)&&(t.auth=`${e.username||""}:${e.password||""}`),t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(1),o=["protocol","host","hostname","port","pathname","search"];t.default=(e,t)=>{var r,n;if(t.path){if(t.pathname)throw new TypeError("Parameters `path` and `pathname` are mutually exclusive.");if(t.search)throw new TypeError("Parameters `path` and `search` are mutually exclusive.");if(t.searchParams)throw new TypeError("Parameters `path` and `searchParams` are mutually exclusive.")}if(t.search&&t.searchParams)throw new TypeError("Parameters `search` and `searchParams` are mutually exclusive.");if(!e){if(!t.protocol)throw new TypeError("No URL protocol specified");e=`${t.protocol}//${null!==(n=null!==(r=t.hostname)&&void 0!==r?r:t.host)&&void 0!==n?n:""}`}const i=new s.URL(e);if(t.path){const e=t.path.indexOf("?");-1===e?t.pathname=t.path:(t.pathname=t.path.slice(0,e),t.search=t.path.slice(e+1)),delete t.path}for(const e of o)t[e]&&(i[e]=t[e].toString());return i}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(){this.weakMap=new WeakMap,this.map=new Map}set(e,t){"object"==typeof e?this.weakMap.set(e,t):this.map.set(e,t)}get(e){return"object"==typeof e?this.weakMap.get(e):this.map.get(e)}has(e){return"object"==typeof e?this.weakMap.has(e):this.map.has(e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dnsLookupIpVersionToFamily=t.isDnsLookupIpVersion=void 0;const s={auto:0,ipv4:4,ipv6:6};t.isDnsLookupIpVersion=e=>e in s,t.dnsLookupIpVersionToFamily=e=>{if(t.isDnsLookupIpVersion(e))return s[e];throw new Error("Invalid DNS lookup IP version")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=new Set;t.default=e=>{s.has(e)||(s.add(e),process.emitWarning("Got: "+e,{type:"DeprecationWarning"}))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(3);t.default=(e,t)=>{if(s.default.null_(e.encoding))throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead");s.assert.any([s.default.string,s.default.undefined],e.encoding),s.assert.any([s.default.boolean,s.default.undefined],e.resolveBodyOnly),s.assert.any([s.default.boolean,s.default.undefined],e.methodRewriting),s.assert.any([s.default.boolean,s.default.undefined],e.isStream),s.assert.any([s.default.string,s.default.undefined],e.responseType),void 0===e.responseType&&(e.responseType="text");const{retry:r}=e;if(e.retry=t?{...t.retry}:{calculateDelay:e=>e.computedValue,limit:0,methods:[],statusCodes:[],errorCodes:[],maxRetryAfter:void 0},s.default.object(r)?(e.retry={...e.retry,...r},e.retry.methods=[...new Set(e.retry.methods.map(e=>e.toUpperCase()))],e.retry.statusCodes=[...new Set(e.retry.statusCodes)],e.retry.errorCodes=[...new Set(e.retry.errorCodes)]):s.default.number(r)&&(e.retry.limit=r),s.default.undefined(e.retry.maxRetryAfter)&&(e.retry.maxRetryAfter=Math.min(...[e.timeout.request,e.timeout.connect].filter(s.default.number))),s.default.object(e.pagination)){t&&(e.pagination={...t.pagination,...e.pagination});const{pagination:r}=e;if(!s.default.function_(r.transform))throw new Error("`options.pagination.transform` must be implemented");if(!s.default.function_(r.shouldContinue))throw new Error("`options.pagination.shouldContinue` must be implemented");if(!s.default.function_(r.filter))throw new TypeError("`options.pagination.filter` must be implemented");if(!s.default.function_(r.paginate))throw new Error("`options.pagination.paginate` must be implemented")}return"json"===e.responseType&&void 0===e.headers.accept&&(e.headers.accept="application/json"),e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.retryAfterStatusCodes=void 0,t.retryAfterStatusCodes=new Set([413,429,503]);t.default=({attemptCount:e,retryOptions:t,error:r,retryAfter:s})=>{if(e>t.limit)return 0;const o=t.methods.includes(r.options.method),n=t.errorCodes.includes(r.code),i=r.response&&t.statusCodes.includes(r.response.statusCode);if(!o||!n&&!i)return 0;if(r.response){if(s)return void 0===t.maxRetryAfter||s>t.maxRetryAfter?0:s;if(413===r.response.statusCode)return 0}return 2**(e-1)*1e3+100*Math.random()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(6);t.default=(e,t,r,o)=>{const{rawBody:n}=e;try{if("text"===t)return n.toString(o);if("json"===t)return 0===n.length?"":r(n.toString());if("buffer"===t)return n;throw new s.ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)}catch(t){throw new s.ParseError(t,e)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(6);t.default=function(e,...t){const r=(async()=>{if(e instanceof s.RequestError)try{for(const r of t)if(r)for(const t of r)e=await t(e)}catch(t){e=t}throw e})(),o=()=>r;return r.json=o,r.text=o,r.buffer=o,r.on=o,r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=r(3);t.default=function e(t){for(const r of Object.values(t))(s.default.plainObject(r)||s.default.array(r))&&e(r);return Object.freeze(t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";r.r(t);var s=r(0),o=r(4),n=r(1),i=r(8),a=r(2);const c=s.Readable,u=Symbol("buffer"),l=Symbol("type");class h{constructor(){this[l]="";const e=arguments[0],t=arguments[1],r=[];let s=0;if(e){const t=e,o=Number(t.length);for(let e=0;e<o;e++){const o=t[e];let n;n=o instanceof Buffer?o:ArrayBuffer.isView(o)?Buffer.from(o.buffer,o.byteOffset,o.byteLength):o instanceof ArrayBuffer?Buffer.from(o):o instanceof h?o[u]:Buffer.from("string"==typeof o?o:String(o)),s+=n.length,r.push(n)}}this[u]=Buffer.concat(r);let o=t&&void 0!==t.type&&String(t.type).toLowerCase();o&&!/[^\u0020-\u007E]/.test(o)&&(this[l]=o)}get size(){return this[u].length}get type(){return this[l]}text(){return Promise.resolve(this[u].toString())}arrayBuffer(){const e=this[u],t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new c;return e._read=function(){},e.push(this[u]),e.push(null),e}toString(){return"[object Blob]"}slice(){const e=this.size,t=arguments[0],r=arguments[1];let s,o;s=void 0===t?0:t<0?Math.max(e+t,0):Math.min(t,e),o=void 0===r?e:r<0?Math.max(e+r,0):Math.min(r,e);const n=Math.max(o-s,0),i=this[u].slice(s,s+n),a=new h([],{type:arguments[2]});return a[u]=i,a}}function d(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}let f;Object.defineProperties(h.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(h.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.name="FetchError";try{f=require("encoding").convert}catch(e){}const p=Symbol("Body internals"),m=s.PassThrough;function y(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=r.size;let n=void 0===o?0:o;var i=r.timeout;let a=void 0===i?0:i;null==e?e=null:g(e)?e=Buffer.from(e.toString()):v(e)||Buffer.isBuffer(e)||("[object ArrayBuffer]"===Object.prototype.toString.call(e)?e=Buffer.from(e):ArrayBuffer.isView(e)?e=Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof s||(e=Buffer.from(String(e)))),this[p]={body:e,disturbed:!1,error:null},this.size=n,this.timeout=a,e instanceof s&&e.on("error",(function(e){const r="AbortError"===e.name?e:new d(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[p].error=r}))}function b(){var e=this;if(this[p].disturbed)return y.Promise.reject(new TypeError("body used already for: "+this.url));if(this[p].disturbed=!0,this[p].error)return y.Promise.reject(this[p].error);let t=this.body;if(null===t)return y.Promise.resolve(Buffer.alloc(0));if(v(t)&&(t=t.stream()),Buffer.isBuffer(t))return y.Promise.resolve(t);if(!(t instanceof s))return y.Promise.resolve(Buffer.alloc(0));let r=[],o=0,n=!1;return new y.Promise((function(s,i){let a;e.timeout&&(a=setTimeout((function(){n=!0,i(new d(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))}),e.timeout)),t.on("error",(function(t){"AbortError"===t.name?(n=!0,i(t)):i(new d(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))})),t.on("data",(function(t){if(!n&&null!==t){if(e.size&&o+t.length>e.size)return n=!0,void i(new d(`content size at ${e.url} over limit: ${e.size}`,"max-size"));o+=t.length,r.push(t)}})),t.on("end",(function(){if(!n){clearTimeout(a);try{s(Buffer.concat(r,o))}catch(t){i(new d(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}}}))}))}function g(e){return"object"==typeof e&&"function"==typeof e.append&&"function"==typeof e.delete&&"function"==typeof e.get&&"function"==typeof e.getAll&&"function"==typeof e.has&&"function"==typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"==typeof e.sort)}function v(e){return"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&"function"==typeof e.constructor&&"string"==typeof e.constructor.name&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function w(e){let t,r,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return o instanceof s&&"function"!=typeof o.getBoundary&&(t=new m,r=new m,o.pipe(t),o.pipe(r),e[p].body=t,o=r),o}function _(e){return null===e?null:"string"==typeof e?"text/plain;charset=UTF-8":g(e)?"application/x-www-form-urlencoded;charset=UTF-8":v(e)?e.type||null:Buffer.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||ArrayBuffer.isView(e)?null:"function"==typeof e.getBoundary?"multipart/form-data;boundary="+e.getBoundary():e instanceof s?null:"text/plain;charset=UTF-8"}function E(e){const t=e.body;return null===t?0:v(t)?t.size:Buffer.isBuffer(t)?t.length:t&&"function"==typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}y.prototype={get body(){return this[p].body},get bodyUsed(){return this[p].disturbed},arrayBuffer(){return b.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob(){let e=this.headers&&this.headers.get("content-type")||"";return b.call(this).then((function(t){return Object.assign(new h([],{type:e.toLowerCase()}),{[u]:t})}))},json(){var e=this;return b.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(t){return y.Promise.reject(new d(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}}))},text(){return b.call(this).then((function(e){return e.toString()}))},buffer(){return b.call(this)},textConverted(){var e=this;return b.call(this).then((function(t){return function(e,t){if("function"!=typeof f)throw new Error("The package `encoding` must be installed to use the textConverted() function");const r=t.get("content-type");let s,o,n="utf-8";r&&(s=/charset=([^;]*)/i.exec(r));o=e.slice(0,1024).toString(),!s&&o&&(s=/<meta.+?charset=(['"])(.+?)\1/i.exec(o));!s&&o&&(s=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o),s||(s=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(o),s&&s.pop()),s&&(s=/charset=(.*)/i.exec(s.pop())));!s&&o&&(s=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o));s&&(n=s.pop(),"gb2312"!==n&&"gbk"!==n||(n="gb18030"));return f(e,"UTF-8",n).toString()}(t,e.headers)}))}},Object.defineProperties(y.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),y.mixIn=function(e){for(const t of Object.getOwnPropertyNames(y.prototype))if(!(t in e)){const r=Object.getOwnPropertyDescriptor(y.prototype,t);Object.defineProperty(e,t,r)}},y.Promise=global.Promise;const P=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,S=/[^\t\x20-\x7e\x80-\xff]/;function T(e){if(e=""+e,P.test(e)||""===e)throw new TypeError(e+" is not a legal HTTP header name")}function k(e){if(e=""+e,S.test(e))throw new TypeError(e+" is not a legal HTTP header value")}function x(e,t){t=t.toLowerCase();for(const r in e)if(r.toLowerCase()===t)return r}const O=Symbol("map");class C{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[O]=Object.create(null),e instanceof C){const t=e.raw(),r=Object.keys(t);for(const e of r)for(const r of t[e])this.append(e,r)}else if(null==e);else{if("object"!=typeof e)throw new TypeError("Provided initializer must be an object");{const t=e[Symbol.iterator];if(null!=t){if("function"!=typeof t)throw new TypeError("Header pairs must be iterable");const r=[];for(const t of e){if("object"!=typeof t||"function"!=typeof t[Symbol.iterator])throw new TypeError("Each header pair must be iterable");r.push(Array.from(t))}for(const e of r){if(2!==e.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(e[0],e[1])}}else for(const t of Object.keys(e)){const r=e[t];this.append(t,r)}}}}get(e){T(e=""+e);const t=x(this[O],e);return void 0===t?null:this[O][t].join(", ")}forEach(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=j(this),s=0;for(;s<r.length;){var o=r[s];const n=o[0],i=o[1];e.call(t,i,n,this),r=j(this),s++}}set(e,t){t=""+t,T(e=""+e),k(t);const r=x(this[O],e);this[O][void 0!==r?r:e]=[t]}append(e,t){t=""+t,T(e=""+e),k(t);const r=x(this[O],e);void 0!==r?this[O][r].push(t):this[O][e]=[t]}has(e){return T(e=""+e),void 0!==x(this[O],e)}delete(e){T(e=""+e);const t=x(this[O],e);void 0!==t&&delete this[O][t]}raw(){return this[O]}keys(){return R(this,"key")}values(){return R(this,"value")}[Symbol.iterator](){return R(this,"key+value")}}function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";const r=Object.keys(e[O]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[O][t].join(", ")}:function(t){return[t.toLowerCase(),e[O][t].join(", ")]})}C.prototype.entries=C.prototype[Symbol.iterator],Object.defineProperty(C.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(C.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});const A=Symbol("internal");function R(e,t){const r=Object.create(q);return r[A]={target:e,kind:t,index:0},r}const q=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==q)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[A];const t=e.target,r=e.kind,s=e.index,o=j(t,r);return s>=o.length?{value:void 0,done:!0}:(this[A].index=s+1,{value:o[s],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function L(e){const t=Object.assign({__proto__:null},e[O]),r=x(e[O],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(q,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});const H=Symbol("Response internals"),I=o.STATUS_CODES;class U{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y.call(this,e,t);const r=t.status||200,s=new C(t.headers);if(null!=e&&!s.has("Content-Type")){const t=_(e);t&&s.append("Content-Type",t)}this[H]={url:t.url,status:r,statusText:t.statusText||I[r],headers:s,counter:t.counter}}get url(){return this[H].url||""}get status(){return this[H].status}get ok(){return this[H].status>=200&&this[H].status<300}get redirected(){return this[H].counter>0}get statusText(){return this[H].statusText}get headers(){return this[H].headers}clone(){return new U(w(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}y.mixIn(U.prototype),Object.defineProperties(U.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(U.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});const N=Symbol("Request internals"),B=n.parse,M=n.format,z="destroy"in s.Readable.prototype;function D(e){return"object"==typeof e&&"object"==typeof e[N]}class ${constructor(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};D(e)?t=B(e.url):(t=e&&e.href?B(e.href):B(""+e),e={});let s=r.method||e.method||"GET";if(s=s.toUpperCase(),(null!=r.body||D(e)&&null!==e.body)&&("GET"===s||"HEAD"===s))throw new TypeError("Request with GET/HEAD method cannot have body");let o=null!=r.body?r.body:D(e)&&null!==e.body?w(e):null;y.call(this,o,{timeout:r.timeout||e.timeout||0,size:r.size||e.size||0});const n=new C(r.headers||e.headers||{});if(null!=o&&!n.has("Content-Type")){const e=_(o);e&&n.append("Content-Type",e)}let i=D(e)?e.signal:null;if("signal"in r&&(i=r.signal),null!=i&&!function(e){const t=e&&"object"==typeof e&&Object.getPrototypeOf(e);return!(!t||"AbortSignal"!==t.constructor.name)}(i))throw new TypeError("Expected signal to be an instanceof AbortSignal");this[N]={method:s,redirect:r.redirect||e.redirect||"follow",headers:n,parsedURL:t,signal:i},this.follow=void 0!==r.follow?r.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==r.compress?r.compress:void 0===e.compress||e.compress,this.counter=r.counter||e.counter||0,this.agent=r.agent||e.agent}get method(){return this[N].method}get url(){return M(this[N].parsedURL)}get headers(){return this[N].headers}get redirect(){return this[N].redirect}get signal(){return this[N].signal}clone(){return new $(this)}}function F(e){Error.call(this,e),this.type="aborted",this.message=e,Error.captureStackTrace(this,this.constructor)}y.mixIn($.prototype),Object.defineProperty($.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties($.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),F.prototype=Object.create(Error.prototype),F.prototype.constructor=F,F.prototype.name="AbortError";const W=s.PassThrough,V=n.resolve;function G(e,t){if(!G.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return y.Promise=G.Promise,new G.Promise((function(r,n){const c=new $(e,t),u=function(e){const t=e[N].parsedURL,r=new C(e[N].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");if(e.signal&&e.body instanceof s.Readable&&!z)throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let o=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(o="0"),null!=e.body){const t=E(e);"number"==typeof t&&(o=String(t))}o&&r.set("Content-Length",o),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&!r.has("Accept-Encoding")&&r.set("Accept-Encoding","gzip,deflate");let n=e.agent;return"function"==typeof n&&(n=n(t)),r.has("Connection")||n||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:L(r),agent:n})}(c),l=("https:"===u.protocol?i:o).request,h=c.signal;let f=null;const p=function(){let e=new F("The user aborted a request.");n(e),c.body&&c.body instanceof s.Readable&&c.body.destroy(e),f&&f.body&&f.body.emit("error",e)};if(h&&h.aborted)return void p();const m=function(){p(),g()},y=l(u);let b;function g(){y.abort(),h&&h.removeEventListener("abort",m),clearTimeout(b)}h&&h.addEventListener("abort",m),c.timeout&&y.once("socket",(function(e){b=setTimeout((function(){n(new d("network timeout at: "+c.url,"request-timeout")),g()}),c.timeout)})),y.on("error",(function(e){n(new d(`request to ${c.url} failed, reason: ${e.message}`,"system",e)),g()})),y.on("response",(function(e){clearTimeout(b);const t=function(e){const t=new C;for(const r of Object.keys(e))if(!P.test(r))if(Array.isArray(e[r]))for(const s of e[r])S.test(s)||(void 0===t[O][r]?t[O][r]=[s]:t[O][r].push(s));else S.test(e[r])||(t[O][r]=[e[r]]);return t}(e.headers);if(G.isRedirect(e.statusCode)){const s=t.get("Location"),o=null===s?null:V(c.url,s);switch(c.redirect){case"error":return n(new d("uri requested responds with a redirect, redirect mode is set to error: "+c.url,"no-redirect")),void g();case"manual":if(null!==o)try{t.set("Location",o)}catch(e){n(e)}break;case"follow":if(null===o)break;if(c.counter>=c.follow)return n(new d("maximum redirect reached at: "+c.url,"max-redirect")),void g();const s={headers:new C(c.headers),follow:c.follow,counter:c.counter+1,agent:c.agent,compress:c.compress,method:c.method,body:c.body,signal:c.signal,timeout:c.timeout,size:c.size};return 303!==e.statusCode&&c.body&&null===E(c)?(n(new d("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void g()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==c.method)||(s.method="GET",s.body=void 0,s.headers.delete("content-length")),r(G(new $(o,s))),void g())}}e.once("end",(function(){h&&h.removeEventListener("abort",m)}));let s=e.pipe(new W);const o={url:c.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:c.size,timeout:c.timeout,counter:c.counter},i=t.get("Content-Encoding");if(!c.compress||"HEAD"===c.method||null===i||204===e.statusCode||304===e.statusCode)return f=new U(s,o),void r(f);const u={flush:a.Z_SYNC_FLUSH,finishFlush:a.Z_SYNC_FLUSH};if("gzip"==i||"x-gzip"==i)return s=s.pipe(a.createGunzip(u)),f=new U(s,o),void r(f);if("deflate"!=i&&"x-deflate"!=i){if("br"==i&&"function"==typeof a.createBrotliDecompress)return s=s.pipe(a.createBrotliDecompress()),f=new U(s,o),void r(f);f=new U(s,o),r(f)}else{e.pipe(new W).once("data",(function(e){s=8==(15&e[0])?s.pipe(a.createInflate()):s.pipe(a.createInflateRaw()),f=new U(s,o),r(f)}))}})),function(e,t){const r=t.body;null===r?e.end():v(r)?r.stream().pipe(e):Buffer.isBuffer(r)?(e.write(r),e.end()):r.pipe(e)}(y,c)}))}G.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},G.Promise=global.Promise;var J=G;const{Client:K}=r(30),{EMAIL_TOKEN:Q}=process.env,Y=new K({auth:process.env.NOTION_TOKEN}),{NOTION_DB_ID:Z}=process.env,{NOTION_USER_ID:X}=process.env;exports.handler=async e=>{JSON.parse(e.body).payload;const t=JSON.parse(e.body).payload.form_name;if(console.log("form name: "+t),"Subscribe - Buttondown"==t){const t=JSON.parse(e.body).payload.email;return J("https://api.buttondown.email/v1/subscribers",{method:"POST",headers:{Authorization:"Token "+Q,"Content-Type":"application/json"},body:JSON.stringify({email:t,tags:["embeddedFormNetlify"]})}).then(e=>e.json()).then(e=>{console.log("Submitted to Buttondown:\n "+e)}).catch(e=>({statusCode:422,body:String(e)}))}if("Submit - Notion"==t){const t=JSON.parse(e.body).payload.data;var r=t.submitName.charAt(0).toUpperCase(),s="look it up";s="1-10"==t.submitSize?"small":"11-40"==t.submitSize?"medium":"41-100"==t.submitSize?"large":"100+"==t.submitSize?"huge":"dunno";var o="- "+t.rendering+" \n- "+t.advertising+" \n- "+t.architecture+" \n- "+t.branding+" \n- "+t.community+" \n- "+t.development+" \n- "+t.environmental+" \n- "+t.events+" \n- "+t.exhibition+" \n- "+t.experiential+" \n- "+t.gaming+" \n- "+t.illustration+" \n- "+t.industrial+" \n- "+t.interior+" \n- "+t.marketing+" \n- "+t.motion+" \n- "+t.naming+" \n- "+t.packaging+" \n- "+t.photography+" \n- "+t.presentation+" \n- "+t.print+" \n- "+t.product+" \n- "+t.publicRelations+" \n- "+t.research+" \n- "+t.education+" \n- "+t.strategy+" \n- "+t.typography+" \n- "+t.uxui+" \n- "+t.vfx+" \n- "+t.video+" \n- "+t.sound+" \n- "+t.voice+" \n- "+t.virtualReality+" \n- "+t.eCommerce+" \n";const n=await Y.pages.create({parent:{database_id:Z},properties:{Name:{title:[{text:{content:"Submission - "+t.submitName}}]},Status:{select:{name:"Submissions"}},Bucket:{multi_select:[{name:"content"},{name:"submission"},{name:"data"}]}},children:[{object:"block",type:"heading_3",heading_3:{text:[{type:"text",text:{content:"Submitted by "+t.submitContact}}]}},{object:"block",type:"paragraph",paragraph:{text:[{type:"text",text:{content:'--- \ntitle: "'+t.submitName+'" \nfeaturedImage: ./-hamburgers.png \nwebsite: "'+t.submitWebsite+'" \ntwit: "'+t.submitSocial+'" \ninst: " " \ncategory: "'+r+'" \ntags: \n- '+t.submitNeighborhood+"\n- "+s+"\n"+o+"\n--- \n \nDescription \n \n \n"}}]}},{object:"block",type:"paragraph",paragraph:{text:[{type:"text",text:{content:"Would you like to be a guest on the show? Or do you want to hear from someone specifically? \n- "+t.submitGuest+" \n"}}]}},{object:"block",type:"paragraph",paragraph:{text:[{type:"text",text:{content:"Would you buy a hardcopy printed directory? \n-  "+t.submitPrint+" \n"}}]}},{object:"block",type:"paragraph",paragraph:{text:[{type:"text",text:{content:"If you have any questions or suggestions, let us know: \n- "+t.submitNotes+" \n"}}]}}]});console.log(n)}}}]));